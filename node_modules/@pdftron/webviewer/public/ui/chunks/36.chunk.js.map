{"version":3,"sources":["webpack:///./src/ui/src/components/LeftPanelPageTabs/LeftPanelPageTabs/LeftPanelPageTabsContainer.scss?5cfb","webpack:///./src/ui/src/helpers/pageManipulationFunctions.js","webpack:///./src/ui/src/components/ThumbnailControls/ThumbnailControls.scss?2fb7","webpack:///./src/ui/src/components/ThumbnailControls/ThumbnailControls.scss","webpack:///./src/ui/src/components/Thumbnail/Thumbnail.scss?dd93","webpack:///./src/ui/src/components/Thumbnail/Thumbnail.scss","webpack:///./src/ui/src/components/LeftPanelPageTabs/LeftPanelPageTabs/LeftPanelPageTabsContainer.scss","webpack:///./src/ui/src/components/DocumentControls/DocumentControls.scss?8aa0","webpack:///./src/ui/src/components/DocumentControls/DocumentControls.scss","webpack:///./src/ui/src/components/ThumbnailsPanel/ThumbnailsPanel.scss?b775","webpack:///./src/ui/src/components/ThumbnailsPanel/ThumbnailsPanel.scss","webpack:///./src/ui/src/components/PageManipulationOverlayButton/PageManipulationOverlayButtonContainer.js","webpack:///./src/ui/src/components/PageManipulationOverlayButton/index.js","webpack:///./src/ui/src/components/ThumbnailControls/ThumbnailControls.js","webpack:///./src/ui/src/components/ThumbnailControls/index.js","webpack:///./src/ui/src/components/Thumbnail/Thumbnail.js","webpack:///./src/ui/src/components/Thumbnail/ThumbnailRedux.js","webpack:///./src/ui/src/components/Thumbnail/index.js","webpack:///./src/ui/src/components/LeftPanelPageTabs/LeftPanelPageTabsMoreSmall/LeftPanelPageTabsMoreSmall.js","webpack:///./src/ui/src/components/LeftPanelPageTabs/LeftPanelPageTabsInsertSmall/LeftPanelPageTabsInsertSmall.js","webpack:///./src/ui/src/components/LeftPanelPageTabs/CustomLeftPanelOperations/CustomLeftPanelOperations.js","webpack:///./src/ui/src/components/LeftPanelPageTabs/LeftPanelPageTabsRotate/LeftPanelPageTabsRotate.js","webpack:///./src/ui/src/components/LeftPanelPageTabs/LeftPanelPageTabsSmall/LeftPanelPageTabsSmall.js","webpack:///./src/ui/src/components/LeftPanelPageTabs/LeftPanelPageTabsMore/LeftPanelPageTabsMore.js","webpack:///./src/ui/src/components/LeftPanelPageTabs/LeftPanelPageTabsMove/LeftPanelPageTabsMove.js","webpack:///./src/ui/src/components/LeftPanelPageTabs/LeftPanelPageTabs/LeftPanelPageTabs.js","webpack:///./src/ui/src/components/LeftPanelPageTabs/LeftPanelPageTabsInsert/LeftPanelPageTabsInsert.js","webpack:///./src/ui/src/components/LeftPanelPageTabs/LeftPanelPageTabsOperations/LeftPanelPageTabsOperations.js","webpack:///./src/ui/src/components/LeftPanelPageTabs/LeftPanelPageTabsLarge/LeftPanelPageTabsLarge.js","webpack:///./src/ui/src/components/LeftPanelPageTabs/LeftPanelPageTabsContainer.js","webpack:///./src/ui/src/components/LeftPanelPageTabs/index.js","webpack:///./src/ui/src/components/DocumentControls/DocumentControls.js","webpack:///./src/ui/src/components/DocumentControls/index.js","webpack:///./src/ui/src/helpers/pageManipulation.js","webpack:///./src/ui/src/components/ThumbnailsPanel/ThumbnailsPanel.js","webpack:///./src/ui/src/components/ThumbnailsPanel/index.js"],"names":["api","content","__esModule","default","module","i","options","styleTag","window","isApryseWebViewerWebComponent","document","head","appendChild","webComponents","getElementsByTagName","length","findNestedWebComponents","tagName","root","elements","querySelectorAll","forEach","el","push","shadowRoot","clonedStyleTags","webComponent","onload","styleNode","innerHTML","cloneNode","exports","locals","getNewRotation","curr","counterClockwise","Core","PageRotation","E_0","E_90","E_180","E_270","rotatePages","pageNumbers","doc","core","getDocument","docType","type","workerTypes","PDF","IMAGE","WEBVIEWER_SERVER","isWebViewerServerDocument","rotation","index","docViewer","getDocumentViewer","currentRotations","getPageRotations","page","setRotation","rotateClockwise","createAnnouncement","i18next","t","getPageRotation","getCurrentPage","rotateCounterClockwise","insertAbove","width","height","insertBlankPages","insertBelow","map","replace","dispatch","actions","closeElement","DataElements","PAGE_MANIPULATION_OVERLAY","openElement","extractPages","message","title","confirmBtnText","secondaryBtnText","extractAnnouncement","deleteAnnouncement","warning","onConfirm","extractPagesWithAnnotations","then","file","saveAs","onSecondary","removePages","setSelectedPageThumbnails","showWarningMessage","deletePages","isModalEnabled","setShiftKeyThumbnailsPivotIndex","getPageCount","Promise","resolve","movePagesToBottom","movePages","getTotalPages","movePagesToTop","noPagesSelectedWarning","keepOpen","exitPageInsertionWarning","closeModal","exitPageReplacementWarning","redactPages","redactionStyles","applyRedactions","createPageRedactions","annots","pageInfo","getPageInfo","pageRotation","redaction","Annotations","RedactionAnnotation","PageNumber","Rect","redactionTypeMap","setCustomData","Author","getCurrentUser","getAnnotationManager","addAnnotations","drawAnnotationsFromList","replacePages","sourceDocument","pagesToRemove","pagesToReplaceIntoDocument","documentLoadedInViewer","pageCountOfLoadedDocument","pagesToRemoveFromOriginal","sort","a","b","insertPages","pagesToInsert","insertBeforeThisPage","PageManipulationOverlayButtonContainer","PageManipulationOverlayButton","props","className","pageIndex","useDispatch","selectedPageIndexes","useSelector","state","selectors","getSelectedThumbnailPageIndexes","onClick","indexOf","ToggleElementButton","dataElement","PAGE_MANIPULATION_OVERLAY_BUTTON","element","img","propTypes","PropTypes","number","isRequired","ThumbnailControls","useTranslation","isElementDisabled","isMoreOptionDisabled","pageDeletionConfirmationModalEnabled","isPageDeletionConfirmationModalEnabled","selectedIndexes","getThumbnailControlMenuItems","shallowEqual","currentPage","pageThumbnailControlMenuItems","includes","documentType","isXod","XOD","isOffice","OFFICE","LEGACY_OFFICE","BUTTONS_MAP","Button","onClickAnnouncement","isCustomized","occurredButtons","buttons","item","key","component","React","cloneElement","data-element","style","display","classNames","Thumbnail","isSelected","updateAnnotations","shiftKeyThumbnailPivotIndex","onFinishLoading","onLoad","onRemove","onDragStart","onDragOver","isDraggable","shouldShowControls","thumbnailSize","pageLabels","isThumbnailMultiselectEnabled","isReaderModeOrReadOnly","isMobile","canLoad","onCancel","isThumbnailSelectingPages","thumbnailSelectionMode","activeDocumentViewerKey","panelSelector","thumbSize","Number","useState","dimensions","setDimensions","loaded","setLoaded","loadTimeout","loadThumbnailAsync","setTimeout","thumbnailContainer","getRootNode","querySelector","pageNum","viewerRotation","getRotation","id","loadCanvas","pageNumber","drawComplete","thumb","childElement","removeChild","ratio","Math","min","abs","cssTransform","allowUseOfOptimizedThumbnail","useEffect","onPagesUpdated","changes","contentChanged","moved","added","removed","isPageAdded","didPageChange","some","changedPage","didPageMove","Object","keys","movedPage","parseInt","isPageRemoved","newPageCount","onRotationUpdated","addEventListener","removeEventListener","clearTimeout","useDidUpdate","isActive","pageLabel","checkboxRotateClass","active","selected","e","draggable","checkboxToggled","target","multiSelectionKeyPressed","ctrlKey","metaKey","shiftKeyPressed","shiftKey","updatedSelectedPages","setThumbnailSelectingPages","shiftKeyPivot","currSelectMinIndex","currSelectMaxIndex","max","Set","Array","from","_","thumbnailSelectionModes","filter","lastSelectedPageIndex","setCurrentPage","Choice","checked","getPageLabels","isReaderMode","isDocumentReadOnly","getShiftKeyThumbnailPivotIndex","getThumbnailSelectionMode","getActiveDocumentViewerKey","selectionModes","LeftPanelPageTabsMoreSmall","THUMBNAILS_CONTROL_MANIPULATE_POPUP_SMALL","THUMBNAILS_CONTROL_MANIPULATE_POPUP_SMALL_TRIGGER","LeftPanelPageTabsInsertSmall","CustomLeftPanelOperations","operations","operation","LeftPanelPageTabsRotate","onRotateClockwise","onRotateCounterClockwise","InitialLeftPanelPageTabsSmall","children","multiPageManipulationControlsItems","childrenArray","Children","toArray","find","child","LeftPanelPageTabsSmall","multiPageManipulationControlsItemsSmall","LeftPanelPageTabsMore","THUMBNAILS_CONTROL_MANIPULATE_POPUP","THUMBNAILS_CONTROL_MANIPULATE_POPUP_TRIGGER","LeftPanelPageTabsMove","moveToTop","moveToBottom","InitialLeftPanelPageTabs","LeftPanelPageTabs","LeftPanelPageTabsInsert","onInsert","LeftPanelPageTabsOperations","onReplace","onExtractPages","onDeletePages","LeftPanelPageTabsLarge","LeftPanelPageTabsContainer","widthMinusMargins","parentElement","isInMobile","getPanelWidth","getLeftPanelWidth","getMultiPageManipulationControlsItems","getMultiPageManipulationControlsItemsSmall","getMultiPageManipulationControlsItemsLarge","isInDesktopOnlyMode","panelWidth","deleteModalEnabled","multiPageManipulationControlsSmall","multiPageManipulationControlsLarge","isDesktopOnlyMode","getBoundingClientRect","panelMinWidth","isPanelLarge","childProps","getPageString","selectedPageArray","pagesToPrint","sortedPages","prevIndex","slice","DocumentControls","isDisabled","initialPagesString","pageString","setPageString","previousPageString","setPreviousPageString","enableThumbnailSelectingPages","onBlur","selectedPagesString","value","pages","getPageArrayFromString","pageIndexes","updatedString","onChange","placeholder","pageNumberPlaceholder","aria-label","bool","arrayOf","string","toggleDocumentControl","func","mergeDocument","srcToMerge","mergeToPage","shouldFireEvent","LOADING_MODAL","reject","mergeResults","fireEvent","Events","DOCUMENT_MERGED","err","ThumbnailsPanel","parentDataElement","isElementOpen","getIsThumbnailMergingEnabled","getIsThumbnailReorderingEnabled","getIsMultipleViewerMerging","openingPageManipulationOverlayByRightClickEnabled","isLeftPanelOpen","totalPages","isThumbnailMergingEnabled","isThumbnailReorderingEnabled","isMultipleViewerMerging","isThumbnailControlDisabled","isThumbnailSliderDisabled","totalPagesFromSecondaryDocumentViewer","isRightClickEnabled","listRef","useRef","pendingThumbs","thumbs","afterMovePageNumber","isOfficeEditor","setIsOfficeEditor","setCanLoad","setHeight","setWidth","draggingOverPageIndex","setDraggingOverPageIndex","isDraggingToPreviousPage","setDraggingToPreviousPage","numberOfColumns","setNumberOfColumns","isDragging","setIsDragging","setThumbnailSize","lastTimeTriggered","setLastTimeTriggered","globalIndex","setGlobalIndex","pageCount","activeThumbRenders","thumbContainer","current","pageWidth","getPageWidth","pageHeight","round","getThumbnailSize","getPageHeight","annotCanvas","createElement","maxWidth","maxHeight","ctx","getContext","zoom","getCompleteRotation","multiplier","getCanvasMultiplier","setAnnotationCanvasTransform","overrideCanvas","overridePageRotation","overridePageCanvas","debounce","drawAnnotations","debouncedDraw","onBeginRendering","onFinishedRendering","needsMoreRendering","onDocumentLoaded","getType","onPageComplete","updatedPagesIndexes","isPageAddedBefore","scrollToRow","floor","onAnnotationChanged","indices","annot","Listable","onPageNumberUpdated","onDragEnd","scrollToRowHelper","change","time","now","Date","getTime","preventDefault","stopPropagation","thumbnail","pageX","x","pageY","y","bottom","hoverAreaHeight","scrollDown","scrollUp","draggingSelectedPage","pagesToMove","THUMBNAIL_DRAGGED","dataTransfer","setData","setDragImage","Image","dropEffect","effectAllowed","frameElement","extractedDataPromise","pagesExtracted","onDrop","externalPageWebViewerFrameId","files","insertTo","isIE11","getData","viewerID","mergingDocument","currentPageIndex","otherWebViewerIframe","parent","console","warn","contentWindow","docToMerge","filename","targetPageNumber","pageNumbersToMove","p","updatedPagesNumbers","offset","THUMBNAIL_DROPPED","pageNumbersBeforeMove","pagesNumbersAfterMove","numberOfPagesMoved","thumbIsLoaded","thumbIsPending","removeFromPendingThumbs","getPendingThumbIndex","splice","cancelLoadThumbnail","findIndex","thumbStatus","canvases","c","cancel","renderThumbnails","columnsOfThumbnails","row","allowPageOperationsUI","role","fill","columnIndex","thumbIndex","allowDragAndDrop","showPlaceHolder","Fragment","onContextMenu","event","setPageManipulationOverlayAlternativePosition","left","right","top","openElements","updateNumberOfColumns","thumbnailHeight","thumbnailAutoScrollAreaStyle","hideTooltipShortcut","aria-valuemin","aria-valuemax","aria-valuenow","step","bounds","onResize","measureRef","ref","rowHeight","rowCount","ceil","rowRenderer","overscanRowCount","outline","scrollToIndex"],"mappings":"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","file":"chunks/36.chunk.js","sourcesContent":["var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../../node_modules/sass-loader/dist/cjs.js!./LeftPanelPageTabsContainer.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","import extractPagesWithAnnotations from 'helpers/extractPagesWithAnnotations';\nimport core from 'core';\nimport { saveAs } from 'file-saver';\nimport actions from 'actions';\nimport i18next from 'i18next';\nimport { workerTypes } from 'constants/types';\nimport { redactionTypeMap } from 'constants/redactionTypes';\nimport DataElements from 'constants/dataElement';\nimport { createAnnouncement } from './accessibility';\n\nconst getNewRotation = (curr, counterClockwise = false) => {\n  const { E_0, E_90, E_180, E_270 } = window.Core.PageRotation;\n  switch (curr) {\n    case E_270:\n      return counterClockwise ? E_180 : E_0;\n    case E_180:\n      return counterClockwise ? E_90 : E_270;\n    case E_90:\n      return counterClockwise ? E_0 : E_180;\n    default:\n      return counterClockwise ? E_270 : E_90;\n  }\n};\n\nconst canRotateLoadedDocument = () => {\n  const doc = core.getDocument();\n  const docType = doc?.type;\n\n  return (\n    workerTypes.PDF === docType ||\n    workerTypes.IMAGE === docType ||\n    (docType === workerTypes.WEBVIEWER_SERVER && !doc.isWebViewerServerDocument())\n  );\n};\n\nconst rotatePages = (pageNumbers, counterClockwise) => {\n  if (canRotateLoadedDocument()) {\n    const rotation = counterClockwise ? window.Core.PageRotation.E_270 : window.Core.PageRotation.E_90;\n    pageNumbers.forEach((index) => {\n      core.rotatePages([index], rotation);\n    });\n  } else {\n    const docViewer = core.getDocumentViewer();\n    const currentRotations = docViewer.getPageRotations();\n    for (const page of pageNumbers) {\n      docViewer.setRotation(getNewRotation(currentRotations[page], counterClockwise), page);\n    }\n  }\n};\n\nconst rotateClockwise = (pageNumbers) => {\n  rotatePages(pageNumbers, false);\n  createAnnouncement(`${i18next.t('action.page')} ${pageNumbers} ${i18next.t('action.rotatedClockwise')} ${i18next.t('action.rotationIs')} ${(core.getDocument().getPageRotation(core.getCurrentPage()) + 90) % 360} degrees`);\n};\n\nconst rotateCounterClockwise = (pageNumbers) => {\n  rotatePages(pageNumbers, true);\n  createAnnouncement(`${i18next.t('action.page')} ${pageNumbers} ${i18next.t('action.rotatedCounterClockwise')} ${i18next.t('action.rotationIs')} ${(core.getDocument().getPageRotation(core.getCurrentPage()) + 270) % 360} degrees`);\n};\n\nconst insertAbove = (pageNumbers, width, height) => {\n  core.insertBlankPages(pageNumbers, width, height);\n};\n\nconst insertBelow = (pageNumbers, width, height) => {\n  core.insertBlankPages(pageNumbers.map((i) => i + 1), width, height);\n};\n\nconst replace = (dispatch) => {\n  dispatch(actions.closeElement(DataElements.PAGE_MANIPULATION_OVERLAY));\n  dispatch(actions.openElement('pageReplacementModal'));\n};\n\nconst extractPages = (pageNumbers, dispatch) => {\n  const message = i18next.t('warning.extractPage.message');\n  const title = i18next.t('warning.extractPage.title');\n  const confirmBtnText = i18next.t('warning.extractPage.confirmBtn');\n  const secondaryBtnText = i18next.t('warning.extractPage.secondaryBtn');\n  const extractAnnouncement = `${i18next.t('action.page')} ${pageNumbers} ${i18next.t('action.extracted')}`;\n  const deleteAnnouncement = `${i18next.t('action.page')} ${pageNumbers} ${i18next.t('action.deleted')}`;\n\n  const warning = {\n    message,\n    title,\n    confirmBtnText,\n    onConfirm: () => extractPagesWithAnnotations(pageNumbers).then((file) => {\n      saveAs(file, 'extractedDocument.pdf');\n      createAnnouncement(extractAnnouncement + deleteAnnouncement);\n    }),\n    secondaryBtnText,\n    onSecondary: () => {\n      extractPagesWithAnnotations(pageNumbers).then((file) => {\n        saveAs(file, 'extractedDocument.pdf');\n        core.removePages(pageNumbers).then(() => {\n          dispatch(actions.setSelectedPageThumbnails([]));\n        });\n        createAnnouncement(extractAnnouncement);\n      });\n    },\n  };\n\n  dispatch(actions.showWarningMessage(warning));\n};\n\nconst deletePages = (pageNumbers, dispatch, isModalEnabled = true) => {\n  const deleteAnnouncement = `${i18next.t('action.page')} ${pageNumbers} ${i18next.t('action.deleted')}`;\n  if (isModalEnabled) {\n    let message = i18next.t('warning.deletePage.deleteMessage');\n    const title = i18next.t('warning.deletePage.deleteTitle');\n    const confirmBtnText = i18next.t('action.ok');\n\n    let warning = {\n      message,\n      title,\n      confirmBtnText,\n      onConfirm: () => core.removePages(pageNumbers).then(() => {\n        dispatch(actions.setSelectedPageThumbnails([]));\n        dispatch(actions.setShiftKeyThumbnailsPivotIndex());\n        createAnnouncement(deleteAnnouncement);\n      }),\n    };\n\n    if (core.getDocumentViewer().getPageCount() === pageNumbers.length) {\n      message = i18next.t('warning.deletePage.deleteLastPageMessage');\n\n      warning = {\n        message,\n        title,\n        confirmBtnText,\n        onConfirm: () => Promise.resolve(),\n      };\n    }\n\n    dispatch(actions.showWarningMessage(warning));\n  } else {\n    core.removePages(pageNumbers).then(() => {\n      dispatch(actions.setSelectedPageThumbnails([]));\n      dispatch(actions.setShiftKeyThumbnailsPivotIndex());\n      createAnnouncement(deleteAnnouncement);\n    });\n  }\n};\n\nconst movePagesToBottom = (pageNumbers) => {\n  core.movePages(pageNumbers, core.getTotalPages() + 1);\n  createAnnouncement(`${i18next.t('action.page')} ${pageNumbers} ${i18next.t('action.movedToBottomOfDocument')}`);\n};\n\nconst movePagesToTop = (pageNumbers) => {\n  core.movePages(pageNumbers, 0);\n  createAnnouncement(`${i18next.t('action.page')} ${pageNumbers} ${i18next.t('action.movedToTopofDocument')}`);\n};\n\nconst noPagesSelectedWarning = (pageNumbers, dispatch) => {\n  if (pageNumbers.length === 0) {\n    const title = i18next.t('warning.selectPage.selectTitle');\n    const message = i18next.t('warning.selectPage.selectMessage');\n    const confirmBtnText = i18next.t('action.ok');\n\n    const warning = {\n      message,\n      title,\n      confirmBtnText,\n      onConfirm: () => Promise.resolve(),\n      keepOpen: ['leftPanel'],\n    };\n\n    dispatch(actions.showWarningMessage(warning));\n    return true;\n  }\n  return false;\n};\n\nconst exitPageInsertionWarning = (closeModal, dispatch) => {\n  const title = i18next.t('insertPageModal.warning.title');\n  const message = i18next.t('insertPageModal.warning.message');\n  const confirmBtnText = i18next.t('action.ok');\n\n  const warning = {\n    message,\n    title,\n    confirmBtnText,\n    onConfirm: closeModal,\n    keepOpen: ['leftPanel'],\n  };\n\n  dispatch(actions.showWarningMessage(warning));\n};\n\nconst exitPageReplacementWarning = (closeModal, dispatch) => {\n  const title = i18next.t('option.pageReplacementModal.warning.title');\n  const message = i18next.t('option.pageReplacementModal.warning.message');\n  const confirmBtnText = i18next.t('action.ok');\n\n  const warning = {\n    message,\n    title,\n    confirmBtnText,\n    onConfirm: closeModal,\n    keepOpen: ['leftPanel'],\n  };\n\n  dispatch(actions.showWarningMessage(warning));\n};\n\nconst redactPages = (pageNumbers, redactionStyles) => {\n  core.applyRedactions(createPageRedactions(pageNumbers, redactionStyles));\n};\n\nconst createPageRedactions = (pageNumbers, redactionStyles) => {\n  const annots = [];\n  const document = core.getDocument();\n  for (const page of pageNumbers) {\n    const pageInfo = document.getPageInfo(page);\n    const pageRotation = document.getPageRotation(page);\n    if (pageInfo) {\n      let width;\n      let height;\n      if (pageRotation === 90 || pageRotation === 270) {\n        width = pageInfo.height;\n        height = pageInfo.width;\n      } else {\n        width = pageInfo.width;\n        height = pageInfo.height;\n      }\n      const redaction = new window.Core.Annotations.RedactionAnnotation({\n        PageNumber: page,\n        Rect: new window.Core.Annotations.Rect(0, 0, width, height),\n        ...redactionStyles\n      });\n      redaction.type = redactionTypeMap['FULL_PAGE'];\n      redaction.setCustomData('trn-redaction-type', redactionTypeMap['FULL_PAGE']);\n      redaction.Author = core.getCurrentUser();\n      annots.push(redaction);\n    }\n  }\n  core.getAnnotationManager().addAnnotations(annots);\n  core.getAnnotationManager().drawAnnotationsFromList(annots);\n  return annots;\n};\n\nconst replacePages = async (sourceDocument, pagesToRemove, pagesToReplaceIntoDocument) => {\n  const documentLoadedInViewer = core.getDocument();\n  const pageCountOfLoadedDocument = documentLoadedInViewer.getPageCount();\n  const pagesToRemoveFromOriginal = pagesToRemove.sort((a, b) => a - b);\n\n  // If document to replace into has only one page, or we are replacing all pages\n  // then we can insert pages at the end, and then remove the pages to avoid an error of removing all pages\n  if (pageCountOfLoadedDocument === 1 || pagesToRemoveFromOriginal.length === pageCountOfLoadedDocument) {\n    await documentLoadedInViewer.insertPages(sourceDocument, pagesToReplaceIntoDocument);\n    await documentLoadedInViewer.removePages(pagesToRemoveFromOriginal);\n  } else {\n    // If document to replace into has > 1 page we need insert the new pages at the spot of the first removed page\n    // pagesToRemoveFromOriginal is sorted in ascending order. Interleaving pages would be complex.\n    await documentLoadedInViewer.removePages(pagesToRemoveFromOriginal);\n    await documentLoadedInViewer.insertPages(sourceDocument, pagesToReplaceIntoDocument, pagesToRemoveFromOriginal[0]);\n  }\n};\n\nconst insertPages = async (sourceDocument, pagesToInsert, insertBeforeThisPage = null) => {\n  const documentLoadedInViewer = core.getDocument();\n  await documentLoadedInViewer.insertPages(sourceDocument, pagesToInsert, insertBeforeThisPage);\n};\n\nexport {\n  rotateClockwise,\n  rotateCounterClockwise,\n  insertAbove,\n  insertBelow,\n  replace,\n  extractPages,\n  deletePages,\n  movePagesToBottom,\n  movePagesToTop,\n  noPagesSelectedWarning,\n  redactPages,\n  createPageRedactions,\n  replacePages,\n  insertPages,\n  exitPageInsertionWarning,\n  exitPageReplacementWarning\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./ThumbnailControls.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.thumbnailControls-overlay{display:grid;text-align:center;z-index:2;margin-top:5px;grid-template-areas:\\\"rotate delete . more\\\";grid-template-columns:repeat(3,1fr)}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.thumbnailControls-overlay{display:flex}}.thumbnailControls-overlay .Button{height:32px;padding:0;width:32px}.thumbnailControls-overlay .Button .Icon{height:24px;width:24px;color:var(--icon-color)}.thumbnailControls-overlay .Button:hover{background:var(--view-header-button-hover);border-radius:4px}.thumbnailControls-overlay .Button.active{background:var(--view-header-button-active)}.thumbnailControls-overlay .Button.active .Icon{color:var(--selected-icon-color)}.thumbnailControls-overlay .rotate-button{grid-area:rotate}.thumbnailControls-overlay .delete-button{grid-area:delete}.thumbnailControls-overlay .more-options{grid-area:more}.thumbnailControls-overlay.custom-buttons .Button{grid-area:auto}.thumbnailControls{display:flex;flex-direction:row;text-align:center;z-index:2;margin-top:5px}.thumbnailControls .Button{height:32px;padding:0;width:32px;margin:0 4px}.thumbnailControls .Button .Icon{height:24px;width:24px;color:var(--icon-color)}.thumbnailControls .Button:hover{background:var(--view-header-button-hover);border-radius:4px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./Thumbnail.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.Thumbnail{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;cursor:pointer}.Thumbnail.active .container .page-image{border:2px solid var(--focus-border);box-shadow:none;box-sizing:content-box}.Thumbnail .container{position:relative;display:flex;justify-content:center;align-items:center;cursor:pointer}.Thumbnail .container .page-image{box-shadow:0 0 3px 0 var(--box-shadow)}.Thumbnail .container .annotation-image,.Thumbnail .container .page-image{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.Thumbnail .container .checkbox{position:absolute;border-radius:4px;z-index:4}.Thumbnail .container .default{top:3%;right:15%}.Thumbnail .container .rotated{top:15%;right:3%}.Thumbnail .page-label{margin-top:11px}.Thumbnail.selected .container .thumbnail:before{color:#fff;background:var(--focus-border);width:16px;height:16px;position:absolute;z-index:10}.Thumbnail.selected .container canvas{background:hsla(0,0%,100%,.6)}.Thumbnail.active .page-label{color:var(--focus-border)!important}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.documentControlsContainer .PageControlContainer{display:flex;background-color:var(--gray-2);justify-content:center;align-content:center;margin:0 8px 0 16px;border-radius:4px}.documentControlsContainer .PageControlContainer .dropdown-menu{position:relative}.documentControlsContainer .PageControlContainer .dropdown-menu .indicator{position:absolute;bottom:1px;right:1px;width:0;height:0;border-left:4px solid transparent;border-right:4px solid transparent;border-top:4px solid #c4c4c4;transform:rotateY(0deg) rotate(315deg)}.documentControlsContainer .PageControlContainer button .Icon{height:21px;width:21px;color:var(--icon-color)}.documentControlsContainer .PageControlContainer .button-hover:hover{background:var(--view-header-button-hover);border-radius:4px}.documentControlsContainer .PageControlContainer .divider{height:20px;width:1px;background:var(--divider);margin:6px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./DocumentControls.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.documentControls{display:flex;flex-direction:column}.documentControls .divider{height:1px;background:var(--divider);margin:16px 8px 8px 16px}.documentControls .documentControlsInput{display:flex;flex-direction:row;padding:8px 8px 16px 16px}.documentControls .documentControlsInput .pagesInput{width:100%;height:30px;border:1px solid var(--border);border-radius:4px;color:var(--text-color);padding:4px 8px}.documentControls .documentControlsInput .pagesInput:focus{outline:none;border:1px solid var(--focus-border)}.documentControls .documentControlsInput .pagesInput::-moz-placeholder{color:var(--placeholder-text)}.documentControls .documentControlsInput .pagesInput:-ms-input-placeholder{color:var(--placeholder-text)}.documentControls .documentControlsInput .pagesInput::placeholder{color:var(--placeholder-text)}.documentControls .documentControlsInput .documentControlsButton{display:flex;flex-direction:row;padding-left:2px}.documentControls .documentControlsInput .documentControlsButton .Button{height:30px;padding:0;width:30px;margin:0 4px}.documentControls .documentControlsInput .documentControlsButton .Button .Icon{height:24px;width:24px;color:var(--icon-color)}.documentControls .documentControlsInput .documentControlsButton .Button:hover{background:var(--view-header-button-hover);border-radius:4px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./ThumbnailsPanel.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.thumbnail-slider-container{display:flex;align-items:center;width:230px;margin:0 auto}.thumbnail-slider-container .thumbnail-slider{width:100%;height:20px;padding:0;color:transparent;background-color:transparent;border:0 transparent}.thumbnail-slider-container input[type=range]{-webkit-appearance:none;margin:10px 0;width:100%}.thumbnail-slider-container input[type=range]:focus{outline:none;box-shadow:0 0 5px var(--focus-border)}.thumbnail-slider-container input[type=range]::-webkit-slider-runnable-track{width:100%;height:3px;cursor:pointer;animate:.2s;box-shadow:0 0 0 #000;background:var(--slider-filled);border-radius:5px;border:0 solid #000}.thumbnail-slider-container input[type=range]::-webkit-slider-thumb{box-shadow:0 0 1px #000;border:0 solid #000;height:15px;width:15px;border-radius:50px;background:var(--slider-filled);cursor:pointer;-webkit-appearance:none;margin-top:-5px}.thumbnail-slider-container input[type=range]:focus::-webkit-slider-runnable-track{background:var(--slider-filled)}.thumbnail-slider-container input[type=range]::-moz-range-track{width:100%;height:3px;cursor:pointer;animate:.2s;box-shadow:0 0 0 #000;background:var(--slider-filled);border-radius:5px;border:0 solid #000}.thumbnail-slider-container input[type=range]::-moz-range-thumb{box-shadow:0 0 1px #000;border:0 solid #000;height:15px;width:15px;border-radius:50px;background:var(--slider-filled);cursor:pointer}.thumbnail-slider-container input[type=range]::-ms-track{padding:5px 0 0;width:100%;height:3px;background:transparent;border-color:transparent;color:transparent;cursor:pointer;border-width:6px 0;animate:.2s}.thumbnail-slider-container input[type=range]::-ms-fill-lower,.thumbnail-slider-container input[type=range]::-ms-fill-upper{background:var(--slider-filled);border:0 solid #000;border-radius:10px;box-shadow:0 0 0 #000}.thumbnail-slider-container input[type=range]::-ms-thumb{box-shadow:0 0 1px #000;border:0 solid #000;height:15px;width:15px;border-radius:50%;background:var(--slider-filled);cursor:pointer}.thumbnail-slider-container input[type=range]:focus::-ms-fill-lower,.thumbnail-slider-container input[type=range]:focus::-ms-fill-upper{background:var(--slider-filled)}.thumbnail-slider-container Button{width:15px;height:15px;margin:2.5px;padding-top:6px}.thumbnail-slider-container Button:hover{background:var(--view-header-button-hover);border-radius:4px}.ThumbnailsPanel{overflow:hidden!important;display:flex;height:100%}.ThumbnailsPanel #virtualized-thumbnails-container{flex:1}.ThumbnailsPanel .row{display:flex;justify-content:space-around;align-items:center;flex-direction:column}.ThumbnailsPanel .thumbnailPlaceholder{width:150px;margin:2px;border:1px solid var(--focus-border)}.ThumbnailsPanel .columnsOfThumbnails.row{display:flex;justify-content:left;align-items:center;flex-direction:row}.ThumbnailsPanel .columnsOfThumbnails .cellThumbContainer{display:flex;flex-direction:row}.ThumbnailsPanel .columnsOfThumbnails .Thumbnail{display:inline-flex}.ThumbnailsPanel .columnsOfThumbnails .thumbnailPlaceholder{width:116px;min-width:116px;height:150px;margin-bottom:30px}.thumbnailAutoScrollArea{position:absolute;width:calc(100% - 55px);z-index:10;background:hsla(0,0%,100%,0)}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import React from 'react';\nimport ToggleElementButton from '../ToggleElementButton';\nimport { useDispatch, useSelector } from 'react-redux';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport DataElements from 'constants/dataElement';\n\nfunction PageManipulationOverlayButtonContainer(props) {\n  const { className, pageIndex } = props;\n\n  const dispatch = useDispatch();\n  const selectedPageIndexes = useSelector((state) => selectors.getSelectedThumbnailPageIndexes(state));\n\n  const onClickPageManipulationOverlayButton = () => {\n    if (selectedPageIndexes.indexOf(pageIndex) === -1) {\n      dispatch(actions.setSelectedPageThumbnails([pageIndex]));\n    }\n  };\n\n  return (\n    <div\n      className={className}\n      onClick={onClickPageManipulationOverlayButton}\n    >\n      <ToggleElementButton\n        dataElement={DataElements.PAGE_MANIPULATION_OVERLAY_BUTTON}\n        element={DataElements.PAGE_MANIPULATION_OVERLAY}\n        img=\"icon-tool-more\"\n        title=\"option.thumbnailPanel.moreOptions\"\n      />\n    </div>\n  );\n}\n\nexport default PageManipulationOverlayButtonContainer;","import PageManipulationOverlayButton from './PageManipulationOverlayButtonContainer';\n\nexport default PageManipulationOverlayButton;","import React from 'react';\nimport { useDispatch, shallowEqual, useSelector } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { deletePages, rotateClockwise, rotateCounterClockwise } from 'helpers/pageManipulationFunctions';\nimport Button from 'components/Button';\nimport selectors from 'selectors';\nimport './ThumbnailControls.scss';\nimport PageManipulationOverlayButton from 'components/PageManipulationOverlayButton';\nimport { workerTypes } from 'constants/types';\nimport core from 'src/core';\nimport DataElements from 'constants/dataElement';\nimport { useTranslation } from 'react-i18next';\n\nconst propTypes = {\n  index: PropTypes.number.isRequired,\n};\n\nconst dataElementName = 'thumbnailControl';\n\nconst ThumbnailControls = ({ index }) => {\n  const { t } = useTranslation();\n  const [isElementDisabled] = useSelector((state) => [selectors.isElementDisabled(state, dataElementName)]);\n  const [isMoreOptionDisabled] = useSelector((state) => [selectors.isElementDisabled(state, DataElements.PAGE_MANIPULATION_OVERLAY_BUTTON)]);\n  const [isPageDeletionConfirmationModalEnabled, selectedIndexes] = useSelector((state) => [\n    selectors.pageDeletionConfirmationModalEnabled(state),\n    selectors.getSelectedThumbnailPageIndexes(state),\n  ]);\n  const dispatch = useDispatch();\n\n  const [\n    currentPage,\n    pageThumbnailControlMenuItems,\n  ] = useSelector((state) => [\n    selectors.getCurrentPage(state),\n    selectors.getThumbnailControlMenuItems(state),\n  ], shallowEqual);\n\n  let pageNumbers = selectedIndexes.length > 0 ? selectedIndexes.map((i) => i + 1) : [index + 1];\n\n  const isCurrentPageInTheSelection = pageNumbers.includes(currentPage);\n\n  if (!isCurrentPageInTheSelection) {\n    pageNumbers = [currentPage];\n  }\n\n  const document = core.getDocument();\n  const documentType = document?.type;\n  const isXod = documentType === workerTypes.XOD;\n  const isOffice = documentType === workerTypes.OFFICE || documentType === workerTypes.LEGACY_OFFICE;\n\n  const BUTTONS_MAP = {\n    'thumbRotateClockwise': <Button\n      className=\"rotate-button\"\n      img=\"icon-header-page-manipulation-page-rotation-clockwise-line\"\n      onClick={() => rotateClockwise(pageNumbers)}\n      title=\"option.thumbnailPanel.rotatePageClockwise\"\n      dataElement=\"thumbRotateClockwise\"\n    />,\n    'thumbRotateCounterClockwise': <Button\n      img=\"icon-header-page-manipulation-page-rotation-counterclockwise-line\"\n      onClick={() => rotateCounterClockwise(pageNumbers)}\n      title=\"option.thumbnailPanel.rotatePageCounterClockwise\"\n      dataElement=\"thumbRotateCounterClockwise\"\n    />,\n    'thumbDelete': <Button\n      className=\"delete-button\"\n      img=\"icon-delete-line\"\n      onClick={() => deletePages(pageNumbers, dispatch, isPageDeletionConfirmationModalEnabled)}\n      title=\"option.thumbnailPanel.delete\"\n      dataElement=\"thumbDelete\"\n      onClickAnnouncement={`${t('action.delete')} ${t('action.modal')} ${t('action.isOpen')}`}\n    />,\n  };\n  let isCustomized = false;\n  const occurredButtons = [];\n  const buttons = pageThumbnailControlMenuItems.map((item) => {\n    const { dataElement } = item;\n    const key = dataElement;\n    let component = BUTTONS_MAP[dataElement];\n    if (occurredButtons.indexOf(dataElement) > -1) {\n      return null;\n    }\n    occurredButtons.push(dataElement);\n\n    /* Example button object:\n    {\n      title: 'Alert me',\n      img: '/path-to-image',\n      onClick: (selectedPageNumbers) => alert(``),\n      dataElement: 'alertMeDataElement',\n    } */\n    if (!component) {\n      isCustomized = true;\n      const { img, onClick, title } = item;\n      component = <Button\n        className={`${dataElement}-button`}\n        img={img}\n        onClick={() => onClick(currentPage)}\n        title={title}\n        dataElement={dataElement}\n      />;\n    }\n\n    return component\n      ? React.cloneElement(component, {\n        key,\n      })\n      : null;\n  });\n\n  if (isElementDisabled) {\n    return null;\n  } if (isXod || isOffice || document?.isWebViewerServerDocument()) {\n    return (\n      <div className=\"thumbnailControls-overlay\" data-element={dataElementName}\n        style={{ display: 'flex' }}\n      >\n        <Button\n          img=\"icon-header-page-manipulation-page-rotation-counterclockwise-line\"\n          onClick={() => rotateCounterClockwise(pageNumbers)}\n          title=\"option.thumbnailPanel.rotatePageCounterClockwise\"\n          dataElement=\"thumbRotateCounterClockwise\"\n        />\n        <Button\n          img=\"icon-header-page-manipulation-page-rotation-clockwise-line\"\n          onClick={() => rotateClockwise(pageNumbers)}\n          title=\"option.thumbnailPanel.rotatePageClockwise\"\n          dataElement=\"thumbRotateClockwise\"\n        />\n      </div>\n    );\n  }\n  return (\n    <div className={classNames({\n      'thumbnailControls-overlay': true,\n      'custom-buttons': isCustomized,\n    })}\n    data-element={dataElementName}\n    >\n      {buttons}\n      {\n        (isMoreOptionDisabled) ? null : <PageManipulationOverlayButton\n          className={'more-options'}\n          pageIndex={index}\n        />\n      }\n\n    </div>\n  );\n};\n\n\nThumbnailControls.propTypes = propTypes;\n\nexport default ThumbnailControls;\n","import ThumbnailControls from './ThumbnailControls';\n\nexport default ThumbnailControls;\n","import React, { useEffect, useState } from 'react';\nimport classNames from 'classnames';\nimport useDidUpdate from 'hooks/useDidUpdate';\nimport core from 'core';\nimport ThumbnailControls from 'components/ThumbnailControls';\nimport thumbnailSelectionModes from 'constants/thumbnailSelectionModes';\n\nimport './Thumbnail.scss';\nimport { Choice } from '@pdftron/webviewer-react-toolkit';\nimport getRootNode from 'helpers/getRootNode';\n\n// adds a delay in ms so thumbs that are only on the screen briefly are not loaded.\nconst THUMBNAIL_LOAD_DELAY = 50;\n\nconst Thumbnail = ({\n  index,\n  isSelected,\n  updateAnnotations,\n  shiftKeyThumbnailPivotIndex,\n  onFinishLoading,\n  onLoad,\n  onRemove = () => { },\n  onDragStart,\n  onDragOver,\n  isDraggable,\n  shouldShowControls,\n  thumbnailSize,\n  currentPage,\n  pageLabels = [],\n  selectedPageIndexes,\n  isThumbnailMultiselectEnabled,\n  isReaderModeOrReadOnly,\n  dispatch,\n  actions,\n  isMobile,\n  canLoad,\n  onCancel,\n  isThumbnailSelectingPages,\n  thumbnailSelectionMode,\n  activeDocumentViewerKey,\n  panelSelector\n}) => {\n  const thumbSize = thumbnailSize ? Number(thumbnailSize) : 150;\n\n  const [dimensions, setDimensions] = useState({ width: thumbSize, height: thumbSize });\n  // To ensure checkmark loads after thumbnail\n  const [loaded, setLoaded] = useState(false);\n\n  let loadTimeout = null;\n\n  const loadThumbnailAsync = () => {\n    loadTimeout = setTimeout(() => {\n      const thumbnailContainer = getRootNode().querySelector(`.ThumbnailsPanel.${panelSelector} #pageThumb${index}`);\n\n      const pageNum = index + 1;\n      const viewerRotation = core.getRotation(pageNum);\n\n      const doc = core.getDocument(activeDocumentViewerKey);\n      // Possible race condition can happen where we try to render a thumbnail for a page that has\n      // been deleted. Prevent that by checking if pageInfo exists\n\n      if (doc && doc.getPageInfo(pageNum)) {\n        const id = doc.loadCanvas({\n          pageNumber: pageNum,\n          width: thumbSize,\n          height: thumbSize,\n          drawComplete: async (thumb) => {\n            const thumbnailContainer = getRootNode().querySelector(`.ThumbnailsPanel.${panelSelector} #pageThumb${index}`);\n            if (thumbnailContainer) {\n              const childElement = thumbnailContainer.querySelector('.page-image');\n              if (childElement) {\n                thumbnailContainer.removeChild(childElement);\n              }\n\n              thumb.className = 'page-image';\n\n              const ratio = Math.min(thumbSize / thumb.width, thumbSize / thumb.height);\n              thumb.style.width = `${thumb.width * ratio}px`;\n              thumb.style.height = `${thumb.height * ratio}px`;\n              setDimensions({ width: Number(thumb.width), height: Number(thumb.height) });\n\n              if (Math.abs(viewerRotation)) {\n                const cssTransform = `rotate(${viewerRotation * 90}deg) translate(-50%,-50%)`;\n                const cssTransformOrigin = 'top left';\n                thumb.style['transform'] = cssTransform;\n                thumb.style['transform-origin'] = cssTransformOrigin;\n                thumb.style['ms-transform'] = cssTransform;\n                thumb.style['ms-transform-origin'] = cssTransformOrigin;\n                thumb.style['-moz-transform'] = cssTransform;\n                thumb.style['-moz-transform-origin'] = cssTransformOrigin;\n                thumb.style['-webkit-transform-origin'] = cssTransformOrigin;\n                thumb.style['-webkit-transform'] = cssTransform;\n                thumb.style['-o-transform'] = cssTransform;\n                thumb.style['-o-transform-origin'] = cssTransformOrigin;\n              }\n\n              thumbnailContainer.appendChild(thumb);\n            }\n\n            if (updateAnnotations) {\n              updateAnnotations(index);\n            }\n\n            onFinishLoading(index);\n            setLoaded(true);\n          },\n          allowUseOfOptimizedThumbnail: true,\n        });\n        onLoad(index, thumbnailContainer, id);\n      }\n    }, THUMBNAIL_LOAD_DELAY);\n  };\n\n  useEffect(() => {\n    const onPagesUpdated = (changes) => {\n      const { contentChanged, moved, added, removed } = changes;\n\n      const currentPage = index + 1;\n\n      const isPageAdded = added.includes(currentPage);\n      const didPageChange = contentChanged.some((changedPage) => currentPage === changedPage);\n      const didPageMove = Object.keys(moved).some((movedPage) => currentPage === parseInt(movedPage));\n      const isPageRemoved = removed.includes(currentPage);\n      const newPageCount = core.getTotalPages();\n\n      if (removed.length > 0 && index + 1 > newPageCount) {\n        return;\n      }\n\n      if (isPageAdded || didPageChange || didPageMove || isPageRemoved) {\n        loadThumbnailAsync();\n      }\n    };\n\n    const onRotationUpdated = () => {\n      setLoaded(false);\n      loadThumbnailAsync();\n    };\n\n    core.addEventListener('pagesUpdated', onPagesUpdated);\n    core.addEventListener('rotationUpdated', onRotationUpdated);\n    if (canLoad) {\n      loadThumbnailAsync();\n    }\n    return () => {\n      core.removeEventListener('pagesUpdated', onPagesUpdated);\n      core.removeEventListener('rotationUpdated', onRotationUpdated);\n      clearTimeout(loadTimeout);\n      onRemove(index);\n    };\n  }, []);\n\n  useDidUpdate(() => {\n    if (canLoad) {\n      loadThumbnailAsync();\n      updateAnnotations(index);\n    } else {\n      onCancel(index);\n    }\n  }, [canLoad, activeDocumentViewerKey]);\n\n  const handleClick = (e) => {\n    const checkboxToggled = e.target.type && e.target.type === 'checkbox';\n    if (isThumbnailMultiselectEnabled && !isReaderModeOrReadOnly) {\n      const multiSelectionKeyPressed = e.ctrlKey || e.metaKey;\n      const shiftKeyPressed = e.shiftKey;\n      let updatedSelectedPages = [...selectedPageIndexes];\n\n      if (shiftKeyPressed) {\n        dispatch(actions.setThumbnailSelectingPages(true));\n        // Include current page as part of selection if we just started shift-selecting\n        let shiftKeyPivot = shiftKeyThumbnailPivotIndex;\n        if (shiftKeyPivot === null) {\n          shiftKeyPivot = currentPage - 1;\n          dispatch(actions.setShiftKeyThumbnailsPivotIndex(shiftKeyPivot));\n        }\n        // get the range of the selected index and update selected page\n        const currSelectMinIndex = Math.min(shiftKeyPivot, index);\n        const currSelectMaxIndex = Math.max(shiftKeyPivot, index);\n        updatedSelectedPages = [...new Set([...Array.from(\n          { length: currSelectMaxIndex - currSelectMinIndex + 1 },\n          (_, i) => i + currSelectMinIndex,\n        )])];\n      } else if (multiSelectionKeyPressed || isThumbnailSelectingPages) {\n        dispatch(actions.setThumbnailSelectingPages(true));\n        // Only select a page if multiSelectionKeyPressed or if checkbox is checked unless in 'thumbnail' mode\n        if (multiSelectionKeyPressed || checkboxToggled || thumbnailSelectionMode === thumbnailSelectionModes['THUMBNAIL']) {\n          // Include current page as part of selection if we just started multi-selecting\n          if (selectedPageIndexes.length === 0 && !isThumbnailSelectingPages) {\n            updatedSelectedPages.push(currentPage - 1);\n          } else if (selectedPageIndexes.includes(index)) {\n            updatedSelectedPages = selectedPageIndexes.filter((pageIndex) => index !== pageIndex);\n          } else {\n            updatedSelectedPages.push(index);\n          }\n        }\n        dispatch(actions.setShiftKeyThumbnailsPivotIndex(index));\n      } else {\n        updatedSelectedPages = [index];\n      }\n      // set shiftKeyPivot when press ctr key or single key\n      const lastSelectedPageIndex = updatedSelectedPages[updatedSelectedPages.length - 1];\n      const shouldUpdateShiftKeyPivotIndex = !isThumbnailSelectingPages && !shiftKeyPressed;\n\n      if (shouldUpdateShiftKeyPivotIndex) {\n        dispatch(actions.setShiftKeyThumbnailsPivotIndex(lastSelectedPageIndex));\n      }\n\n      dispatch(actions.setSelectedPageThumbnails(updatedSelectedPages));\n    } else if (isMobile()) {\n      dispatch(actions.closeElement('leftPanel'));\n    }\n\n    // due to the race condition, we need a settimeout here\n    // otherwise, sometimes the current page will not be visible in left panel\n    setTimeout(() => {\n      // If user clicks on checkbox, it should not automatically jump to that page,\n      // only if the user clicks on thumbnail then go to page and view it, unless in 'thumbnail' mode\n      if (!checkboxToggled || thumbnailSelectionMode === thumbnailSelectionModes['THUMBNAIL']) {\n        core.setCurrentPage(index + 1);\n      }\n    }, 0);\n  };\n\n  const isActive = currentPage === index + 1;\n  const pageLabel = pageLabels[index];\n  let checkboxRotateClass = 'default';\n  const rotation = core.getRotation(index + 1);\n  if ((!rotation || rotation === 2) && dimensions.width > dimensions.height) {\n    checkboxRotateClass = 'rotated';\n  } else if ((rotation === 1 || rotation === 3) && dimensions.width < dimensions.height) {\n    checkboxRotateClass = 'rotated';\n  }\n\n  return (\n    <div\n      className={classNames({\n        Thumbnail: true,\n        active: isActive,\n        selected: isSelected && isThumbnailSelectingPages,\n      })}\n      onDragOver={(e) => onDragOver(e, index)}\n      id=\"Thumbnail-container\"\n    >\n      <div\n        className=\"container\"\n        style={{\n          width: thumbSize,\n          height: thumbSize,\n        }}\n        onDragStart={(e) => onDragStart(e, index)}\n        draggable={isDraggable}\n        onClick={handleClick}\n      >\n        <div id={`pageThumb${index}`} className=\"thumbnail\" />\n        {isThumbnailSelectingPages && loaded && (\n          <Choice className={`checkbox ${checkboxRotateClass}`} checked={selectedPageIndexes.includes(index)} />\n        )}\n      </div>\n      <div className=\"page-label\">{pageLabel}</div>\n      {!isThumbnailSelectingPages && isActive && shouldShowControls && <ThumbnailControls index={index} />}\n    </div>\n  );\n};\n\nexport default Thumbnail;\n","import React from 'react';\nimport { useSelector, shallowEqual, useDispatch } from 'react-redux';\n\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport { isMobile } from 'helpers/device';\n\nimport Thumbnail from './Thumbnail';\n\nconst ThumbnailRedux = (props) => {\n  const [\n    currentPage,\n    pageLabels,\n    selectedPageIndexes,\n    isThumbnailMultiselectEnabled,\n    isReaderMode,\n    isDocumentReadOnly,\n    shiftKeyThumbnailPivotIndex,\n    isThumbnailSelectingPages,\n    thumbnailSelectionMode,\n    activeDocumentViewerKey,\n    selectionModes\n  ] = useSelector(\n    (state) => [\n      selectors.getCurrentPage(state),\n      selectors.getPageLabels(state),\n      selectors.getSelectedThumbnailPageIndexes(state),\n      selectors.isThumbnailMultiselectEnabled(state),\n      selectors.isReaderMode(state),\n      selectors.isDocumentReadOnly(state),\n      selectors.getShiftKeyThumbnailPivotIndex(state),\n      selectors.isThumbnailSelectingPages(state),\n      selectors.getThumbnailSelectionMode(state),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual,\n  );\n\n  const dispatch = useDispatch();\n\n  return <Thumbnail {...props} {...{\n    currentPage,\n    pageLabels,\n    selectedPageIndexes,\n    isThumbnailMultiselectEnabled,\n    isReaderModeOrReadOnly: isReaderMode || isDocumentReadOnly,\n    dispatch,\n    actions,\n    isMobile,\n    shiftKeyThumbnailPivotIndex,\n    isThumbnailSelectingPages,\n    thumbnailSelectionMode,\n    selectionModes,\n    activeDocumentViewerKey,\n  }}\n  />;\n};\n\nexport default ThumbnailRedux;\n","import Thumbnail from './ThumbnailRedux';\n\nexport default Thumbnail;","import React from 'react';\nimport ToggleElementButton from 'components/ToggleElementButton';\nimport '../LeftPanelPageTabs/LeftPanelPageTabsContainer.scss';\nimport DataElements from 'constants/dataElement';\n\nfunction LeftPanelPageTabsMoreSmall() {\n  return (\n    <div className={'dropdown-menu button-hover'}>\n      <ToggleElementButton\n        title=\"action.more\"\n        className={'dropdown-menu'}\n        element={DataElements.THUMBNAILS_CONTROL_MANIPULATE_POPUP_SMALL}\n        dataElement={DataElements.THUMBNAILS_CONTROL_MANIPULATE_POPUP_SMALL_TRIGGER}\n        img=\"icon-tool-more\"\n      />\n      <div className={'indicator'} />\n    </div>\n  );\n}\n\nexport default LeftPanelPageTabsMoreSmall;\n","import React from 'react';\n\nimport ToggleElementButton from 'components/ToggleElementButton';\nimport '../LeftPanelPageTabs/LeftPanelPageTabsContainer.scss';\n\nfunction LeftPanelPageTabsInsertSmall() {\n  return (\n    <div className={'dropdown-menu'}>\n      <ToggleElementButton\n        title=\"action.PageInsertion\"\n        className={'dropdown-menu'}\n        element=\"thumbnailsControlInsertPopup\"\n        dataElement=\"thumbnailsControlInsertPopupTrigger\"\n        img=\"icon-header-page-manipulation-insert-above\"\n      />\n      <div className={'indicator'} />\n    </div>\n  );\n}\n\nexport default LeftPanelPageTabsInsertSmall;\n","import React from 'react';\nimport Button from 'components/Button';\n\nfunction CustomLeftPanelOperations({ pageNumbers, operations }) {\n  return (\n    <>\n      {operations.map((operation, index) => {\n        return (\n          <Button\n            key={index}\n            className={'button-hover'}\n            dataElement={operation.dataElement}\n            img={operation.img}\n            onClick={() => operation.onClick(pageNumbers)}\n            title={operation.title}\n          />);\n      })\n      }\n    </>\n  );\n}\n\nexport default CustomLeftPanelOperations;\n","import React from 'react';\nimport Button from 'components/Button';\nimport '../LeftPanelPageTabs/LeftPanelPageTabsContainer.scss';\n\nfunction LeftPanelPageTabsRotate({ onRotateClockwise, onRotateCounterClockwise }) {\n  return (\n    <>\n      <Button\n        className={'button-hover'}\n        dataElement=\"thumbnailsControlRotateCounterClockwise\"\n        img=\"icon-header-page-manipulation-page-rotation-counterclockwise-line\"\n        onClick={onRotateCounterClockwise}\n        title=\"action.rotateCounterClockwise\"\n      />\n      <Button\n        className={'button-hover'}\n        dataElement=\"thumbnailsControlRotateClockwise\"\n        img=\"icon-header-page-manipulation-page-rotation-clockwise-line\"\n        onClick={onRotateClockwise}\n        title=\"action.rotateClockwise\"\n      />\n    </>\n  );\n}\n\nexport default LeftPanelPageTabsRotate;\n","import React from 'react';\nimport '../LeftPanelPageTabs/LeftPanelPageTabsContainer.scss';\nimport LeftPanelPageTabsMoreSmall from '../LeftPanelPageTabsMoreSmall/LeftPanelPageTabsMoreSmall';\nimport LeftPanelPageTabsInsertSmall from '../LeftPanelPageTabsInsertSmall/LeftPanelPageTabsInsertSmall';\nimport CustomLeftPanelOperations from '../CustomLeftPanelOperations/CustomLeftPanelOperations';\nimport LeftPanelPageTabsRotate from '../LeftPanelPageTabsRotate/LeftPanelPageTabsRotate';\n\nfunction InitialLeftPanelPageTabsSmall({ children, pageNumbers, multiPageManipulationControlsItems }) {\n  const childrenArray = React.Children.toArray(children);\n  if (!multiPageManipulationControlsItems) {\n    return childrenArray;\n  }\n  return multiPageManipulationControlsItems.map((item, index) => {\n    const { dataElement, type } = item;\n    let component = childrenArray.find((child) => child.props.dataElement === dataElement);\n    const key = dataElement || `${type}-${index}`;\n\n    if (!component) {\n      if (type === 'divider') {\n        component = <div className=\"divider\" />;\n      }\n\n      if (type === 'customPageOperation') {\n        component = <CustomLeftPanelOperations key={dataElement} pageNumbers={pageNumbers} {...item} />;\n      }\n    }\n    return component\n      ? React.cloneElement(component, {\n        key,\n      })\n      : null;\n  });\n}\n\n\nfunction LeftPanelPageTabsSmall(props) {\n  const { pageNumbers, multiPageManipulationControlsItemsSmall, onRotateClockwise, onRotateCounterClockwise } = props;\n  return (\n    <div className={'PageControlContainer root small'}>\n      <InitialLeftPanelPageTabsSmall pageNumbers={pageNumbers} multiPageManipulationControlsItems={multiPageManipulationControlsItemsSmall}>\n        <LeftPanelPageTabsRotate onRotateClockwise={onRotateClockwise}\n          onRotateCounterClockwise={onRotateCounterClockwise}\n          dataElement=\"leftPanelPageTabsRotate\"/>\n        <LeftPanelPageTabsInsertSmall dataElement=\"leftPanelPageTabsInsertSmall\" />\n        <LeftPanelPageTabsMoreSmall dataElement=\"leftPanelPageTabsMoreSmall\" />\n      </InitialLeftPanelPageTabsSmall>\n    </div>\n  );\n}\n\nexport default LeftPanelPageTabsSmall;\n","import React from 'react';\nimport ToggleElementButton from 'components/ToggleElementButton';\nimport '../LeftPanelPageTabs/LeftPanelPageTabsContainer.scss';\nimport DataElements from 'constants/dataElement';\n\nfunction LeftPanelPageTabsMore() {\n  return (\n    <div className={'dropdown-menu button-hover'}>\n      <ToggleElementButton\n        title=\"action.more\"\n        className={'dropdown-menu'}\n        element={DataElements.THUMBNAILS_CONTROL_MANIPULATE_POPUP}\n        dataElement={DataElements.THUMBNAILS_CONTROL_MANIPULATE_POPUP_TRIGGER}\n        img=\"icon-tool-more\"\n      />\n      <div className={'indicator'} />\n    </div>\n  );\n}\n\nexport default LeftPanelPageTabsMore;\n","import React from 'react';\nimport Button from 'components/Button';\nimport '../LeftPanelPageTabs/LeftPanelPageTabsContainer.scss';\n\nfunction LeftPanelPageTabsMove({ moveToTop, moveToBottom }) {\n  return (\n    <>\n      <Button\n        className={'button-hover'}\n        dataElement=\"moveToTop\"\n        img=\"icon-page-move-up\"\n        onClick={moveToTop}\n        title=\"action.moveToTop\"\n      />\n      <Button\n        className={'button-hover'}\n        dataElement=\"moveToBottom\"\n        img=\"icon-page-move-down\"\n        onClick={moveToBottom}\n        title=\"action.moveToBottom\"\n      />\n    </>\n  );\n}\n\nexport default LeftPanelPageTabsMove;\n","import React from 'react';\n\nimport LeftPanelPageTabsMore from '../LeftPanelPageTabsMore/LeftPanelPageTabsMore';\nimport LeftPanelPageTabsRotate from '../LeftPanelPageTabsRotate/LeftPanelPageTabsRotate';\nimport CustomLeftPanelOperations from '../CustomLeftPanelOperations/CustomLeftPanelOperations';\nimport LeftPanelPageTabsMove from 'components/LeftPanelPageTabs/LeftPanelPageTabsMove/LeftPanelPageTabsMove';\n\n\nfunction InitialLeftPanelPageTabs({ children, pageNumbers, multiPageManipulationControlsItems }) {\n  const childrenArray = React.Children.toArray(children);\n  if (!multiPageManipulationControlsItems) {\n    return childrenArray;\n  }\n  return multiPageManipulationControlsItems.map((item, index) => {\n    const { dataElement, type } = item;\n    let component = childrenArray.find((child) => child.props.dataElement === dataElement);\n    const key = dataElement || `${type}-${index}`;\n\n    if (!component) {\n      if (type === 'divider') {\n        component = <div className=\"divider\" />;\n      }\n\n      if (type === 'customPageOperation') {\n        component = <CustomLeftPanelOperations key={dataElement} pageNumbers={pageNumbers} {...item} />;\n      }\n    }\n    return component\n      ? React.cloneElement(component, {\n        key,\n      })\n      : null;\n  });\n}\n\n\nfunction LeftPanelPageTabs(props) {\n  const {\n    pageNumbers,\n    onRotateClockwise,\n    onRotateCounterClockwise,\n    multiPageManipulationControlsItems,\n    moveToTop,\n    moveToBottom\n  } = props;\n  return (\n    <div className={'PageControlContainer root'}>\n      <InitialLeftPanelPageTabs pageNumbers={pageNumbers} multiPageManipulationControlsItems={multiPageManipulationControlsItems} >\n        <LeftPanelPageTabsRotate onRotateClockwise={onRotateClockwise} onRotateCounterClockwise={onRotateCounterClockwise} dataElement=\"leftPanelPageTabsRotate\" />\n        <LeftPanelPageTabsMove moveToTop={moveToTop} moveToBottom={moveToBottom} dataElement=\"leftPanelPageTabsMove\"/>\n        <LeftPanelPageTabsMore dataElement=\"leftPanelPageTabsMore\" />\n      </InitialLeftPanelPageTabs>\n    </div>\n  );\n}\n\n\nexport default LeftPanelPageTabs;\n","import React from 'react';\nimport Button from 'components/Button';\nimport '../LeftPanelPageTabs/LeftPanelPageTabsContainer.scss';\n\nfunction LeftPanelPageTabsInsert({ onInsert }) {\n  return (\n    <>\n      <Button\n        className={'button-hover'}\n        dataElement=\"thumbnailsControlInsert\"\n        img=\"icon-page-insertion-insert\"\n        onClick={onInsert}\n        title=\"action.insert\"\n      />\n    </>\n  );\n}\n\nexport default LeftPanelPageTabsInsert;\n","import React from 'react';\nimport Button from 'components/Button';\nimport '../LeftPanelPageTabs/LeftPanelPageTabsContainer.scss';\n\nfunction LeftPanelPageTabsOperations({ onInsert, onReplace, onExtractPages, onDeletePages }) {\n  return (\n    <>\n      <Button\n        className={'button-hover'}\n        dataElement=\"thumbnailsControlInsert\"\n        img=\"icon-page-insertion-insert\"\n        onClick={onInsert}\n        title=\"action.insert\"\n      />\n      <Button\n        className={'button-hover'}\n        dataElement=\"thumbnailsControlReplace\"\n        img=\"icon-page-replacement\"\n        onClick={onReplace}\n        title=\"action.replace\"\n      />\n      <Button\n        className={'button-hover'}\n        dataElement=\"thumbnailsControlExtract\"\n        img=\"icon-page-manipulation-extract\"\n        onClick={onExtractPages}\n        title=\"action.extract\"\n      />\n      <Button\n        className={'button-hover'}\n        dataElement=\"thumbnailsControlDelete\"\n        img=\"icon-delete-line\"\n        onClick={onDeletePages}\n        title=\"action.delete\"\n      />\n    </>\n  );\n}\n\nexport default LeftPanelPageTabsOperations;\n","import React from 'react';\n\nimport LeftPanelPageTabsInsert from '../LeftPanelPageTabsInsert/LeftPanelPageTabsInsert';\nimport LeftPanelPageTabsRotate from '../LeftPanelPageTabsRotate/LeftPanelPageTabsRotate';\nimport LeftPanelPageTabsOperations from '../LeftPanelPageTabsOperations/LeftPanelPageTabsOperations';\nimport CustomLeftPanelOperations from '../CustomLeftPanelOperations/CustomLeftPanelOperations';\nimport LeftPanelPageTabsMove from '../LeftPanelPageTabsMove/LeftPanelPageTabsMove';\n\n\nfunction InitialLeftPanelPageTabs({ children, pageNumbers, multiPageManipulationControlsItems }) {\n  const childrenArray = React.Children.toArray(children);\n  if (!multiPageManipulationControlsItems) {\n    return childrenArray;\n  }\n  return multiPageManipulationControlsItems.map((item, index) => {\n    const { dataElement, type } = item;\n    let component = childrenArray.find((child) => child.props.dataElement === dataElement);\n    const key = dataElement || `${type}-${index}`;\n\n    if (!component) {\n      if (type === 'divider') {\n        component = <div className=\"divider\" />;\n      }\n\n      if (type === 'customPageOperation') {\n        component = <CustomLeftPanelOperations key={dataElement} pageNumbers={pageNumbers} {...item} />;\n      }\n    }\n    return component\n      ? React.cloneElement(component, {\n        key,\n      })\n      : null;\n  });\n}\n\n\nfunction LeftPanelPageTabsLarge(props) {\n  const { pageNumbers, onRotateClockwise, onRotateCounterClockwise, onInsert, onReplace, onExtractPages, onDeletePages, moveToTop, moveToBottom, multiPageManipulationControlsItems } = props;\n  return (\n    <div className={'PageControlContainer root'}>\n      <InitialLeftPanelPageTabs pageNumbers={pageNumbers} multiPageManipulationControlsItems={multiPageManipulationControlsItems} >\n        <LeftPanelPageTabsRotate onRotateClockwise={onRotateClockwise} onRotateCounterClockwise={onRotateCounterClockwise} dataElement=\"leftPanelPageTabsRotate\" />\n        <LeftPanelPageTabsInsert onInsert={onInsert} dataElement=\"leftPanelPageTabsInsert\" />\n        <LeftPanelPageTabsOperations onReplace={onReplace} onExtractPages={onExtractPages} onDeletePages={onDeletePages} dataElement=\"leftPanelPageTabsOperations\" />\n        <LeftPanelPageTabsMove moveToTop={moveToTop} moveToBottom={moveToBottom} dataElement=\"leftPanelPageTabsMove\" />\n      </InitialLeftPanelPageTabs>\n    </div>\n  );\n}\n\n\nexport default LeftPanelPageTabsLarge;\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport {\n  deletePages,\n  extractPages,\n  noPagesSelectedWarning,\n  replace,\n  rotateClockwise,\n  rotateCounterClockwise,\n  movePagesToBottom,\n  movePagesToTop\n} from 'helpers/pageManipulationFunctions';\nimport LeftPanelPageTabsSmall from 'src/components/LeftPanelPageTabs/LeftPanelPageTabsSmall/LeftPanelPageTabsSmall';\nimport LeftPanelPageTabs from 'components/LeftPanelPageTabs/LeftPanelPageTabs/LeftPanelPageTabs';\nimport { workerTypes } from 'constants/types';\nimport core from 'src/core';\nimport LeftPanelPageTabsRotate from 'components/LeftPanelPageTabs/LeftPanelPageTabsRotate/LeftPanelPageTabsRotate';\nimport LeftPanelPageTabsLarge from './LeftPanelPageTabsLarge/LeftPanelPageTabsLarge';\nimport DataElements from 'constants/dataElement';\nimport { panelMinWidth } from 'constants/panel';\nimport { isMobile as isInMobile } from 'helpers/device';\nimport getRootNode from 'helpers/getRootNode';\n\n// Values come from the CSS\nconst WIDTH_MARGINS = 16 + 8 + 16 + 16 + 16 + 16;\n\nfunction LeftPanelPageTabsContainer({ parentElement }) {\n  const dispatch = useDispatch();\n  const isMobile = isInMobile();\n  const [\n    selectedPageIndexes,\n    panelWidth,\n    deleteModalEnabled,\n    multiPageManipulationControlsItems,\n    multiPageManipulationControlsSmall,\n    multiPageManipulationControlsLarge,\n    isDesktopOnlyMode,\n  ] = useSelector((state) => [\n    selectors.getSelectedThumbnailPageIndexes(state),\n    !parentElement || parentElement === 'leftPanel' ? selectors.getLeftPanelWidth(state) : selectors.getPanelWidth(state, parentElement),\n    selectors.pageDeletionConfirmationModalEnabled(state),\n    selectors.getMultiPageManipulationControlsItems(state),\n    selectors.getMultiPageManipulationControlsItemsSmall(state),\n    selectors.getMultiPageManipulationControlsItemsLarge(state),\n    selectors.isInDesktopOnlyMode(state),\n  ]);\n\n  const pageNumbers = selectedPageIndexes.map((index) => index + 1);\n\n  const openInsertPageModal = () => {\n    dispatch(actions.closeElement(DataElements.PAGE_MANIPULATION_OVERLAY));\n    dispatch(actions.openElement('insertPageModal'));\n  };\n\n  const onReplace = () => !noPagesSelectedWarning(pageNumbers, dispatch) && replace(dispatch);\n  const onExtractPages = () => !noPagesSelectedWarning(pageNumbers, dispatch) && extractPages(pageNumbers, dispatch);\n  const onDeletePages = () => !noPagesSelectedWarning(pageNumbers, dispatch) && deletePages(pageNumbers, dispatch, deleteModalEnabled);\n  const onRotateClockwise = () => !noPagesSelectedWarning(pageNumbers, dispatch) && rotateClockwise(pageNumbers);\n  const onRotateCounterClockwise = () => !noPagesSelectedWarning(pageNumbers, dispatch) && rotateCounterClockwise(pageNumbers);\n  const onInsert = () => !noPagesSelectedWarning(pageNumbers, dispatch) && openInsertPageModal();\n  const moveToTop = () => !noPagesSelectedWarning(pageNumbers, dispatch) && movePagesToTop(pageNumbers);\n  const moveToBottom = () => !noPagesSelectedWarning(pageNumbers, dispatch) && movePagesToBottom(pageNumbers);\n\n  const document = core.getDocument();\n  const documentType = document?.type;\n  const isXod = documentType === workerTypes.XOD;\n  const isOffice = documentType === workerTypes.OFFICE || documentType === workerTypes.LEGACY_OFFICE;\n\n  if (isXod || isOffice || document?.isWebViewerServerDocument()) {\n    return (\n      <div className={'PageControlContainer root small'}>\n        <LeftPanelPageTabsRotate onRotateClockwise={onRotateClockwise} onRotateCounterClockwise={onRotateCounterClockwise} />\n      </div>\n    );\n  }\n\n  const smallBreakPoint = 190;\n  const largeBreakPoint = 290;\n  let widthMinusMargins;\n  if (!isDesktopOnlyMode && isMobile) {\n    try {\n      const appRect = getRootNode().querySelector('.App').getBoundingClientRect();\n      widthMinusMargins = appRect.width - WIDTH_MARGINS;\n    } catch (e) {\n      widthMinusMargins = (panelWidth || panelMinWidth) - WIDTH_MARGINS;\n    }\n  } else {\n    widthMinusMargins = (panelWidth || panelMinWidth) - WIDTH_MARGINS;\n  }\n  const isPanelSmall = widthMinusMargins < smallBreakPoint;\n  const isPanelLarge = widthMinusMargins > largeBreakPoint;\n\n  const childProps = {\n    onReplace,\n    onExtractPages,\n    onDeletePages,\n    onRotateCounterClockwise,\n    onRotateClockwise,\n    onInsert,\n    moveToTop,\n    moveToBottom,\n    pageNumbers,\n  };\n\n  if (isPanelSmall) {\n    return <LeftPanelPageTabsSmall\n      {...childProps}\n      multiPageManipulationControlsItemsSmall={multiPageManipulationControlsSmall}\n    />;\n  }\n\n  if (isPanelLarge) {\n    return <LeftPanelPageTabsLarge\n      {...childProps}\n      multiPageManipulationControlsItems={multiPageManipulationControlsLarge}\n    />;\n  }\n\n\n  return (\n    <LeftPanelPageTabs\n      {...childProps}\n      multiPageManipulationControlsItems={multiPageManipulationControlsItems}\n    />\n  );\n}\n\nexport default LeftPanelPageTabsContainer;\n","import LeftPanelPageTabsContainer from './LeftPanelPageTabsContainer';\n\nexport default LeftPanelPageTabsContainer;","import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport Button from 'components/Button';\nimport getPageArrayFromString from 'helpers/getPageArrayFromString';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport pageNumberPlaceholder from 'constants/pageNumberPlaceholder';\nimport core from 'src/core';\nimport { useTranslation } from 'react-i18next';\nimport LeftPanelPageTabs from 'components/LeftPanelPageTabs';\nimport './DocumentControls.scss';\n\nfunction getPageString(selectedPageArray, pageLabels) {\n  let pagesToPrint = '';\n  const sortedPages = selectedPageArray.sort((a, b) => a - b);\n  let prevIndex = null;\n\n  for (let i = 0; sortedPages.length > i; i++) {\n    if (sortedPages[i + 1] === sortedPages[i] + 1) {\n      prevIndex = prevIndex !== null ? prevIndex : sortedPages[i];\n    } else if (prevIndex !== null) {\n      pagesToPrint = `${pagesToPrint}${pageLabels[prevIndex]}-${pageLabels[sortedPages[i]]}, `;\n      prevIndex = null;\n    } else {\n      pagesToPrint = `${pagesToPrint}${pageLabels[sortedPages[i]]}, `;\n    }\n  }\n\n  return pagesToPrint.slice(0, -2);\n}\n\nconst DocumentControls = ({ shouldShowControls, parentElement }) => {\n  const [t] = useTranslation();\n  const dispatch = useDispatch();\n\n  const [\n    selectedPageIndexes,\n    isDisabled,\n    pageLabels,\n    isThumbnailSelectingPages,\n  ] = useSelector((state) => [\n    selectors.getSelectedThumbnailPageIndexes(state),\n    selectors.isElementDisabled(state, 'documentControl'),\n    selectors.getPageLabels(state),\n    selectors.isThumbnailSelectingPages(state),\n  ]);\n\n  const initialPagesString = getPageString(selectedPageIndexes, pageLabels);\n\n  const [pageString, setPageString] = useState(initialPagesString);\n  const [previousPageString, setPreviousPageString] = useState(initialPagesString);\n\n  useEffect(() => {\n    setPageString(getPageString(selectedPageIndexes, pageLabels));\n  }, [setPageString, selectedPageIndexes, shouldShowControls, pageLabels]);\n\n  const onBlur = (e) => {\n    const selectedPagesString = e.target.value.replace(/ /g, '');\n    const pages = !selectedPagesString ? [] : getPageArrayFromString(selectedPagesString, pageLabels);\n    const pageIndexes = pages.map((page) => page - 1);\n\n    if (pages.length || !selectedPagesString) {\n      dispatch(actions.setSelectedPageThumbnails(pageIndexes));\n\n      const updatedString = getPageString(selectedPageIndexes, pageLabels);\n\n      setPageString(updatedString);\n      setPreviousPageString(updatedString);\n    } else {\n      setPageString(previousPageString);\n    }\n\n    if (selectedPageIndexes.length > 0 && !isThumbnailSelectingPages) {\n      // set a short timeout due to race condition caused by onBlur and\n      // changing the documentControlsButton based on isThumbnailSelectingPages\n      setTimeout(() => {\n        enableThumbnailSelectingPages();\n      }, 100);\n    }\n  };\n\n  const pageStringUpdate = (e) => {\n    setPageString(e.target.value);\n  };\n\n  const disableThumbnailSelectingPages = () => {\n    dispatch(actions.setSelectedPageThumbnails([core.getCurrentPage() - 1]));\n    dispatch(actions.setThumbnailSelectingPages(false));\n  };\n\n  const enableThumbnailSelectingPages = () => {\n    dispatch(actions.setThumbnailSelectingPages(true));\n  };\n\n  return isDisabled ? null : (\n    <div className={'documentControlsContainer'} data-element={'documentControl'}>\n      {shouldShowControls ? (\n        <div className={'documentControls'}>\n          <div className={'divider'}></div>\n          {isThumbnailSelectingPages && <LeftPanelPageTabs parentElement={parentElement}/>}\n          <div className={'documentControlsInput'}>\n            <input\n              onBlur={onBlur}\n              onChange={pageStringUpdate}\n              value={pageString}\n              placeholder={pageNumberPlaceholder}\n              aria-label={t('option.thumbnailPanel.enterPageNumbers')}\n              className=\"pagesInput\"\n              type=\"text\"\n            />\n            <div className={'documentControlsButton'}>\n              {!isThumbnailSelectingPages ? (\n                <Button\n                  img={'icon-tool-select-pages'}\n                  title={'option.documentControls.selectTooltip'}\n                  onClick={enableThumbnailSelectingPages}\n                  dataElement={'thumbMultiSelect'}\n                />\n              ) : (\n                <Button\n                  img={'icon-close'}\n                  title={'option.documentControls.closeTooltip'}\n                  onClick={disableThumbnailSelectingPages}\n                  dataElement={'thumbCloseMultiSelect'}\n                />\n              )}\n            </div>\n          </div>\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nDocumentControls.propTypes = {\n  isDisabled: PropTypes.bool,\n  pageLabels: PropTypes.arrayOf(PropTypes.string),\n  toggleDocumentControl: PropTypes.func,\n  shouldShowControls: PropTypes.bool,\n};\n\nexport default DocumentControls;\n","import DocumentControls from './DocumentControls';\n\nexport default DocumentControls;","import core from 'core';\nimport actions from 'actions';\nimport extractPagesWithAnnotations from './extractPagesWithAnnotations';\nimport fireEvent from './fireEvent';\nimport Events from 'constants/events';\nimport DataElements from 'src/constants/dataElement';\n\nexport const extractPagesToMerge = (pageNumbers) => {\n  // extract pages and put the data on the iFrame window element for another instance of WebViewer to access\n  window.extractedDataPromise = extractPagesWithAnnotations(pageNumbers);\n  window.pagesExtracted = pageNumbers;\n};\n\nexport const mergeDocument = (srcToMerge, mergeToPage, shouldFireEvent = true) => (dispatch) => {\n  dispatch(actions.openElement(DataElements.LOADING_MODAL));\n\n  return new Promise((resolve, reject) => {\n    core.mergeDocument(srcToMerge, mergeToPage).then((mergeResults) => {\n      dispatch(actions.closeElement(DataElements.LOADING_MODAL));\n      core.setCurrentPage(mergeToPage);\n\n      if (shouldFireEvent) {\n        fireEvent(Events.DOCUMENT_MERGED, mergeResults);\n      }\n\n      resolve(mergeResults);\n    }).catch((err) => {\n      reject(err);\n      dispatch(actions.closeElement(DataElements.LOADING_MODAL));\n    });\n  });\n};\n\nexport const mergeExternalWebViewerDocument = (viewerID, mergeToPage) => (dispatch) => {\n  return new Promise((resolve, reject) => {\n    const otherWebViewerIframe = window.parent.document.querySelector(`#${viewerID}`);\n    if (!otherWebViewerIframe) {\n      console.warn('Could not find other instance of WebViewer');\n      reject();\n    }\n\n    const extractedDataPromise = otherWebViewerIframe.contentWindow.extractedDataPromise;\n    if (!extractedDataPromise) {\n      console.warn('Could not retrieve data from other instance of WebViewer');\n      reject();\n    }\n\n    dispatch(actions.openElement(DataElements.LOADING_MODAL));\n    extractedDataPromise.then((docToMerge) => {\n      dispatch(mergeDocument(docToMerge, mergeToPage, false)).then(({ filename, pages }) => {\n        fireEvent(Events.DOCUMENT_MERGED, { filename, pages: otherWebViewerIframe.contentWindow.pagesExtracted });\n        dispatch(actions.closeElement(DataElements.LOADING_MODAL));\n        resolve({ filename, pages });\n      });\n    }).catch((err) => {\n      dispatch(actions.closeElement(DataElements.LOADING_MODAL));\n      reject(err);\n    });\n  });\n};","import debounce from 'lodash/debounce';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { List } from 'react-virtualized';\nimport Measure from 'react-measure';\nimport classNames from 'classnames';\nimport { isIE11 } from 'helpers/device';\n\nimport Thumbnail from 'components/Thumbnail';\nimport DocumentControls from 'components/DocumentControls';\nimport Button from 'components/Button';\n\nimport core from 'core';\nimport { extractPagesToMerge, mergeDocument, mergeExternalWebViewerDocument } from 'helpers/pageManipulation';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport Events from 'constants/events';\nimport DataElements from 'constants/dataElement';\nimport fireEvent from 'helpers/fireEvent';\n\nimport './ThumbnailsPanel.scss';\nimport getRootNode from 'helpers/getRootNode';\nimport { useTranslation } from 'react-i18next';\n\nconst dataTransferWebViewerFrameKey = 'dataTransferWebViewerFrame';\n\nconst ZOOM_RANGE_MIN = '100';\nconst ZOOM_RANGE_MAX = '1000';\nconst ZOOM_RANGE_STEP = '50';\nconst MAX_COLUMNS = 16;\n\nconst hoverAreaHeight = 25;\n\nconst ThumbnailsPanel = ({ panelSelector, parentDataElement }) => {\n  const [\n    isLeftPanelOpen,\n    isDisabled,\n    totalPages,\n    currentPage,\n    selectedPageIndexes,\n    isThumbnailMergingEnabled,\n    isThumbnailReorderingEnabled,\n    isMultipleViewerMerging,\n    isThumbnailControlDisabled,\n    isThumbnailSliderDisabled,\n    isReaderMode,\n    isDocumentReadOnly,\n    totalPagesFromSecondaryDocumentViewer,\n    activeDocumentViewerKey,\n    isRightClickEnabled,\n  ] = useSelector(\n    (state) => [\n      selectors.isElementOpen(state, 'leftPanel'),\n      selectors.isElementDisabled(state, 'thumbnailsPanel'),\n      selectors.getTotalPages(state),\n      selectors.getCurrentPage(state),\n      selectors.getSelectedThumbnailPageIndexes(state),\n      selectors.getIsThumbnailMergingEnabled(state),\n      selectors.getIsThumbnailReorderingEnabled(state),\n      selectors.getIsMultipleViewerMerging(state),\n      selectors.isElementDisabled(state, 'thumbnailControl'),\n      selectors.isElementDisabled(state, 'thumbnailsSizeSlider'),\n      selectors.isReaderMode(state),\n      selectors.isDocumentReadOnly(state),\n      selectors.getTotalPages(state, 2),\n      selectors.getActiveDocumentViewerKey(state),\n      selectors.openingPageManipulationOverlayByRightClickEnabled(state),\n    ],\n    shallowEqual,\n  );\n\n  const [t] = useTranslation();\n\n  const listRef = useRef();\n  const pendingThumbs = useRef([]);\n  const thumbs = useRef([]);\n  const afterMovePageNumber = useRef(null);\n\n  const [isOfficeEditor, setIsOfficeEditor] = useState(false);\n  const [canLoad, setCanLoad] = useState(true);\n  const [height, setHeight] = useState(0);\n  const [width, setWidth] = useState(0);\n  const [draggingOverPageIndex, setDraggingOverPageIndex] = useState(null);\n  const [isDraggingToPreviousPage, setDraggingToPreviousPage] = useState(false);\n  const [numberOfColumns, setNumberOfColumns] = useState(1);\n  const [isDragging, setIsDragging] = useState(false);\n\n  const [thumbnailSize, setThumbnailSize] = useState(150);\n  const [lastTimeTriggered, setLastTimeTriggered] = useState(0);\n  const [globalIndex, setGlobalIndex] = useState(0);\n  const pageCount = activeDocumentViewerKey === 2 ? totalPagesFromSecondaryDocumentViewer : totalPages;\n\n  const dispatch = useDispatch();\n\n  // If memory becomes an issue, change this to use pageNumbers.\n  // Instead of a debounced drawAnnotations function, perhaps use\n  // a function that first checks for the pageNumber in this map\n  // before calling drawAnnotations on a page.\n  let activeThumbRenders = {};\n\n  const getThumbnailSize = (pageWidth, pageHeight) => {\n    let width;\n    let height;\n    let ratio;\n\n    if (pageWidth > pageHeight) {\n      ratio = pageWidth / thumbnailSize;\n      width = thumbnailSize;\n      height = Math.round(pageHeight / ratio);\n    } else {\n      ratio = pageHeight / thumbnailSize;\n      width = Math.round(pageWidth / ratio); // Chrome has trouble displaying borders of non integer width canvases.\n      height = thumbnailSize;\n    }\n\n    return {\n      width,\n      height,\n    };\n  };\n\n  const updateAnnotations = (pageIndex) => {\n    const thumbContainer = thumbs.current && thumbs.current[pageIndex] && thumbs.current[pageIndex].element;\n    if (!thumbContainer) {\n      return;\n    }\n\n    const pageNumber = pageIndex + 1;\n    const pageWidth = core.getPageWidth(pageNumber);\n    const pageHeight = core.getPageHeight(pageNumber);\n\n    const { width, height } = getThumbnailSize(pageWidth, pageHeight);\n\n    const annotCanvas = thumbContainer.querySelector('.annotation-image') || document.createElement('canvas');\n    annotCanvas.className = 'annotation-image';\n    annotCanvas.style.maxWidth = `${thumbnailSize}px`;\n    annotCanvas.style.maxHeight = `${thumbnailSize}px`;\n    const ctx = annotCanvas.getContext('2d');\n\n    let zoom = 1;\n    let rotation = core.getCompleteRotation(pageNumber);\n    if (rotation < 0) {\n      rotation += 4;\n    }\n    const multiplier = window.Core.getCanvasMultiplier();\n\n    if (rotation % 2 === 0) {\n      annotCanvas.width = width;\n      annotCanvas.height = height;\n      zoom = annotCanvas.width / pageWidth;\n      zoom /= multiplier;\n    } else {\n      annotCanvas.width = height;\n      annotCanvas.height = width;\n\n      zoom = annotCanvas.height / pageWidth;\n      zoom /= multiplier;\n    }\n\n    thumbContainer.appendChild(annotCanvas);\n    core.setAnnotationCanvasTransform(ctx, zoom, rotation);\n\n    let options = {\n      pageNumber,\n      overrideCanvas: annotCanvas,\n    };\n\n    const thumb = thumbContainer.querySelector('.page-image');\n\n    if (thumb) {\n      options = {\n        ...options,\n        overridePageRotation: rotation,\n        overridePageCanvas: thumb,\n      };\n    } else {\n      return;\n    }\n\n    if (!activeThumbRenders[pageNumber]) {\n      activeThumbRenders[pageNumber] = debounce(core.drawAnnotations, 112);\n    }\n    const debouncedDraw = activeThumbRenders[pageNumber];\n    debouncedDraw(options);\n  };\n\n  useEffect(() => {\n    const onBeginRendering = () => {\n      setCanLoad(false);\n    };\n\n    const onFinishedRendering = (needsMoreRendering) => {\n      if (!needsMoreRendering) {\n        setCanLoad(true);\n      }\n    };\n\n    const onDocumentLoaded = () => {\n      if (core.getDocument()?.getType() === 'officeEditor') {\n        setIsOfficeEditor(true);\n      } else {\n        setIsOfficeEditor(false);\n      }\n      activeThumbRenders = {};\n      dispatch(actions.setSelectedPageThumbnails([]));\n    };\n\n    const onPageComplete = () => {\n      if (afterMovePageNumber.current) {\n        core.setCurrentPage(afterMovePageNumber.current);\n        afterMovePageNumber.current = null;\n      }\n    };\n\n    core.addEventListener('beginRendering', onBeginRendering);\n    core.addEventListener('finishedRendering', onFinishedRendering);\n    core.addEventListener('documentLoaded', onDocumentLoaded);\n    core.addEventListener('pageComplete', onPageComplete);\n\n\n    // The document might have already been loaded before this component is mounted.\n    // If document is already loaded, call 'onDocumentLoaded()' manually to update the state properly.\n    if (core.getDocument()) {\n      onDocumentLoaded();\n    }\n\n    return () => {\n      core.removeEventListener('beginRendering', onBeginRendering);\n      core.removeEventListener('finishedRendering', onFinishedRendering);\n      core.removeEventListener('documentLoaded', onDocumentLoaded);\n      core.removeEventListener('pageComplete', onPageComplete);\n    };\n  }, []);\n\n  useEffect(() => {\n    const onPagesUpdated = (changes) => {\n      if (!changes) {\n        return;\n      }\n      let updatedPagesIndexes = Array.from(selectedPageIndexes);\n\n      if (changes.removed) {\n        updatedPagesIndexes = updatedPagesIndexes.filter((pageIndex) => changes.removed.indexOf(pageIndex + 1) === -1);\n      }\n\n      if (changes.moved) {\n        updatedPagesIndexes = updatedPagesIndexes.map((pageIndex) => (changes.moved[pageIndex + 1] ? changes.moved[pageIndex + 1] - 1 : pageIndex),\n        );\n      }\n\n      const isPageAddedBefore = changes.added && (changes.added[0] - 1) <= updatedPagesIndexes[0];\n      if (updatedPagesIndexes.length === 1 && isPageAddedBefore) {\n        updatedPagesIndexes = changes.added.map((pageNumber) => pageNumber - 1);\n      }\n\n      dispatch(actions.setSelectedPageThumbnails(updatedPagesIndexes));\n    };\n\n    core.addEventListener('pagesUpdated', onPagesUpdated);\n\n    return () => core.removeEventListener('pagesUpdated', onPagesUpdated);\n  }, [selectedPageIndexes]);\n\n  useEffect(() => {\n    listRef.current?.scrollToRow(Math.floor((currentPage - 1) / numberOfColumns));\n    const onAnnotationChanged = (annots) => {\n      const indices = [];\n\n      annots.forEach((annot) => {\n        const pageIndex = annot.PageNumber - 1;\n        if (!annot.Listable || indices.indexOf(pageIndex) > -1) {\n          return;\n        }\n        indices.push(pageIndex);\n\n        updateAnnotations(pageIndex);\n      });\n    };\n\n    const onPageNumberUpdated = (pageNumber) => {\n      const pageIndex = pageNumber - 1;\n      listRef.current?.scrollToRow(Math.floor(pageIndex / numberOfColumns));\n    };\n\n    core.addEventListener('pageNumberUpdated', onPageNumberUpdated);\n    core.addEventListener('annotationChanged', onAnnotationChanged);\n    core.addEventListener('annotationHidden', onAnnotationChanged);\n\n    return () => {\n      core.removeEventListener('pageNumberUpdated', onPageNumberUpdated);\n      core.removeEventListener('annotationChanged', onAnnotationChanged);\n      core.removeEventListener('annotationHidden', onAnnotationChanged);\n    };\n  }, [thumbnailSize, numberOfColumns]);\n\n  useEffect(() => {\n    if (isReaderMode || isDocumentReadOnly) {\n      dispatch(actions.setSelectedPageThumbnails([]));\n      dispatch(actions.setThumbnailSelectingPages(false));\n    }\n  }, [isReaderMode, isDocumentReadOnly]);\n\n  // if disabled, or is office editor or left panel is not open when we are not in customize mode, return\n  if (isDisabled || isOfficeEditor || (!isLeftPanelOpen && !panelSelector)) {\n    return null;\n  }\n  const onDragEnd = () => {\n    setIsDragging(false);\n    setDraggingOverPageIndex(null);\n  };\n\n  const scrollToRowHelper = (index, change, time) => {\n    const now = new Date().getTime();\n    if (index < pageCount - 1 && index > 0 && now - lastTimeTriggered >= time) {\n      listRef.current?.scrollToRow(Math.floor((index + change) / numberOfColumns));\n      setLastTimeTriggered(now);\n      return index + change;\n    }\n    return index;\n  };\n\n  const onDragOver = (e, index) => {\n    // 'preventDefault' to prevent opening pdf dropped in and 'stopPropagation' to keep parent from opening pdf\n    e.preventDefault();\n    e.stopPropagation();\n    if (!isThumbnailReorderingEnabled && !isThumbnailMergingEnabled) {\n      return;\n    }\n\n    const thumbnail = e.target.getBoundingClientRect();\n    if (numberOfColumns > 1) {\n      // row with more than 1 thumbnail so user are dragging to the left and right\n      setDraggingToPreviousPage(!(e.pageX > thumbnail.x + thumbnail.width / 2));\n    } else {\n      setDraggingToPreviousPage(!(e.pageY > thumbnail.y + thumbnail.height / 2));\n    }\n\n    setDraggingOverPageIndex(index);\n    const virtualizedThumbnailContainerElement = getRootNode().querySelector('#virtualized-thumbnails-container');\n    const { y, bottom } = virtualizedThumbnailContainerElement.getBoundingClientRect();\n\n    if (e.pageY < y + hoverAreaHeight * 4) {\n      setGlobalIndex(scrollToRowHelper(index, -1, 400));\n    } else if (e.pageY > bottom - hoverAreaHeight * 4) {\n      setGlobalIndex(scrollToRowHelper(index, 1, 400));\n    }\n  };\n\n  const scrollDown = () => {\n    setGlobalIndex(scrollToRowHelper(globalIndex, 1, 200));\n  };\n  const scrollUp = () => {\n    setGlobalIndex(scrollToRowHelper(globalIndex, -1, 200));\n  };\n\n  const onDragStart = (e, index) => {\n    setGlobalIndex(index);\n    setIsDragging(true);\n    const draggingSelectedPage = selectedPageIndexes.some((i) => i === index);\n    const pagesToMove = draggingSelectedPage ? selectedPageIndexes.map((index) => index + 1) : [index + 1];\n    fireEvent(Events.THUMBNAIL_DRAGGED);\n    // need to set 'text' to empty for drag to work in FireFox and mobile\n    e.dataTransfer.setData('text', '');\n\n    if (pagesToMove.length > 1) {\n      // can't set to null so set to new instance of an image\n      e.dataTransfer.setDragImage(new Image(), 0, 0);\n    }\n\n    if (isThumbnailMergingEnabled && isMultipleViewerMerging) {\n      e.dataTransfer.dropEffect = 'move';\n      e.dataTransfer.effectAllowed = 'all';\n      e.dataTransfer.setData(dataTransferWebViewerFrameKey, window.frameElement.id);\n      extractPagesToMerge(pagesToMove);\n    }\n\n    if (!draggingSelectedPage) {\n      dispatch(actions.setSelectedPageThumbnails([index]));\n    }\n\n    core.setCurrentPage(index + 1);\n  };\n\n  const onDrop = (e) => {\n    e.preventDefault();\n    const { files } = e.dataTransfer;\n    const insertTo = isDraggingToPreviousPage ? draggingOverPageIndex + 1 : draggingOverPageIndex + 2;\n    let externalPageWebViewerFrameId;\n    if (!isIE11) {\n      // at this time of writing, IE11 does not really have support for getData\n      externalPageWebViewerFrameId = e.dataTransfer.getData(dataTransferWebViewerFrameKey);\n    }\n    const mergingDocument =\n      (externalPageWebViewerFrameId && window.frameElement.id !== externalPageWebViewerFrameId) || files.length;\n    const currentPageIndex = currentPage - 1;\n\n    if (isThumbnailMergingEnabled && mergingDocument) {\n      if (externalPageWebViewerFrameId && window.frameElement.id !== externalPageWebViewerFrameId) {\n        dispatch(mergeExternalWebViewerDocument(externalPageWebViewerFrameId, insertTo));\n      } else if (files.length) {\n        Array.from(files).forEach((file) => {\n          dispatch(mergeDocument(file, insertTo));\n        });\n      }\n    } else if (isThumbnailReorderingEnabled && !mergingDocument) {\n      if (draggingOverPageIndex !== null) {\n        const targetPageNumber = isDraggingToPreviousPage ? draggingOverPageIndex + 1 : draggingOverPageIndex + 2;\n        const draggingSelectedPage = selectedPageIndexes.some((i) => i === currentPageIndex);\n        const pageNumbersToMove = draggingSelectedPage ? selectedPageIndexes.map((i) => i + 1) : [currentPage];\n        afterMovePageNumber.current = targetPageNumber - pageNumbersToMove.filter((p) => p < targetPageNumber).length;\n        core.movePages(pageNumbersToMove, targetPageNumber);\n        const updatedPagesNumbers = [];\n        for (let offset = 0; offset < pageNumbersToMove.length; offset++) {\n          updatedPagesNumbers.push(afterMovePageNumber.current + offset);\n        }\n        fireEvent(Events.THUMBNAIL_DROPPED, { pageNumbersBeforeMove: pageNumbersToMove, pagesNumbersAfterMove: updatedPagesNumbers, numberOfPagesMoved: updatedPagesNumbers.length });\n      }\n    }\n    setDraggingOverPageIndex(null);\n    setIsDragging(false);\n  };\n\n  const onLoad = (pageIndex, element, id) => {\n    if (!thumbIsLoaded(pageIndex) && !thumbIsPending(pageIndex)) {\n      thumbs.current[pageIndex] = {\n        element,\n        loaded: false,\n      };\n\n      pendingThumbs.current.push({\n        pageIndex,\n        id,\n      });\n    }\n  };\n\n  const removeFromPendingThumbs = (pageIndex) => {\n    const index = getPendingThumbIndex(pageIndex);\n    if (index !== -1) {\n      pendingThumbs.current.splice(index, 1);\n    }\n  };\n\n  const thumbIsLoaded = (pageIndex) => thumbs.current[pageIndex]?.loaded;\n\n  const thumbIsPending = (pageIndex) => getPendingThumbIndex(pageIndex) !== -1;\n\n  const onCancel = (pageIndex) => {\n    const index = getPendingThumbIndex(pageIndex);\n    if (index !== -1) {\n      core.cancelLoadThumbnail(pendingThumbs.current[index].id);\n      pendingThumbs.current.splice(index, 1);\n    }\n  };\n\n  const onRightClick = (event, pageIndex) => {\n    event.preventDefault();\n    core.setCurrentPage(pageIndex + 1);\n    if (!selectedPageIndexes.includes(pageIndex)) {\n      dispatch(actions.setSelectedPageThumbnails([pageIndex]));\n    }\n\n    if (isReaderMode || isDocumentReadOnly) {\n      return;\n    }\n\n    dispatch(actions.setPageManipulationOverlayAlternativePosition({ left: event.pageX, right: 'auto', top: event.pageY }));\n    dispatch(actions.openElements([DataElements.PAGE_MANIPULATION_OVERLAY]));\n  };\n\n  const getPendingThumbIndex = (pageIndex) => pendingThumbs.current.findIndex((thumbStatus) => thumbStatus.pageIndex === pageIndex);\n\n  const onRemove = (pageIndex) => {\n    onCancel(pageIndex);\n    const canvases = thumbs.current[pageIndex]?.element?.querySelectorAll('canvas');\n    if (canvases?.length) {\n      canvases.forEach((c) => {\n        c.height = 0;\n        c.width = 0;\n      });\n    }\n\n    if (activeThumbRenders[pageIndex]) {\n      activeThumbRenders[pageIndex].cancel();\n    }\n    thumbs.current[pageIndex] = null;\n  };\n\n  const renderThumbnails = ({ index, key, style }) => {\n    const className = classNames({\n      columnsOfThumbnails: numberOfColumns > 1,\n      row: true,\n    });\n    const allowPageOperationsUI = !(isReaderMode || isDocumentReadOnly);\n\n    return (\n      <div role=\"row\" aria-label=\"row\" className={className} key={key} style={style}>\n        {new Array(numberOfColumns).fill().map((_, columnIndex) => {\n          const thumbIndex = index * numberOfColumns + columnIndex;\n          const allowDragAndDrop = allowPageOperationsUI && (isThumbnailMergingEnabled || isThumbnailReorderingEnabled);\n          const showPlaceHolder = allowDragAndDrop && draggingOverPageIndex === thumbIndex;\n\n          return thumbIndex < pageCount ? (\n            <React.Fragment key={thumbIndex}>\n              {(numberOfColumns > 1 || thumbIndex === 0) && showPlaceHolder && isDraggingToPreviousPage && <div key={`placeholder1-${thumbIndex}`} className=\"thumbnailPlaceholder\" />}\n              <div key={thumbIndex} role=\"cell\" onDragEnd={onDragEnd} className=\"cellThumbContainer\" onContextMenu={(e) => isRightClickEnabled && onRightClick(e, thumbIndex)}>\n                <Thumbnail\n                  isDraggable={allowDragAndDrop}\n                  isSelected={selectedPageIndexes.includes(thumbIndex)}\n                  index={thumbIndex}\n                  canLoad={canLoad}\n                  onLoad={onLoad}\n                  onCancel={onCancel}\n                  onRemove={onRemove}\n                  onDragStart={onDragStart}\n                  onDragOver={onDragOver}\n                  onFinishLoading={removeFromPendingThumbs}\n                  updateAnnotations={updateAnnotations}\n                  shouldShowControls={allowPageOperationsUI}\n                  thumbnailSize={thumbnailSize}\n                  panelSelector={panelSelector}\n                />\n              </div>\n              {showPlaceHolder && !isDraggingToPreviousPage && <div key={`placeholder2-${thumbIndex}`} className=\"thumbnailPlaceholder\" />}\n            </React.Fragment>\n          ) : null;\n        })}\n      </div>\n    );\n  };\n\n  const onPanelResize = ({ bounds }) => {\n    setHeight(bounds.height);\n    setWidth(bounds.width);\n    setNumberOfColumns(Math.min(MAX_COLUMNS, Math.max(1, Math.floor(bounds.width / thumbnailSize))));\n  };\n\n  const updateNumberOfColumns = () => {\n    setNumberOfColumns(Math.min(MAX_COLUMNS, Math.max(1, Math.floor(width / thumbnailSize))));\n  };\n\n  const thumbnailHeight = isThumbnailControlDisabled ? Number(thumbnailSize) + 50 : Number(thumbnailSize) + 80;\n  const shouldShowControls = !(isReaderMode || isDocumentReadOnly);\n  const thumbnailAutoScrollAreaStyle = {\n    'height': `${hoverAreaHeight}px`,\n  };\n\n  return (\n    <React.Fragment>\n      {!isThumbnailSliderDisabled && <div data-element=\"thumbnailsSizeSlider\" className=\"thumbnail-slider-container\">\n        <Button\n          img=\"icon-zoom-thumb-out\"\n          title=\"action.zoomOut\"\n          hideTooltipShortcut\n          onClick={() => {\n            if (thumbnailSize - Number(ZOOM_RANGE_STEP) > Number(ZOOM_RANGE_STEP)) {\n              setThumbnailSize(thumbnailSize - Number(ZOOM_RANGE_STEP));\n              updateNumberOfColumns();\n            }\n          }}\n          dataElement=\"zoomThumbOutButton\"\n        />\n        <input\n          role='slider'\n          type=\"range\"\n          aria-label='thumbnail size slider'\n          min={ZOOM_RANGE_MIN}\n          max={ZOOM_RANGE_MAX}\n          value={thumbnailSize}\n          aria-valuemin={ZOOM_RANGE_MIN}\n          aria-valuemax={ZOOM_RANGE_MAX}\n          aria-valuenow={thumbnailSize}\n          onChange={(e) => {\n            setThumbnailSize(Number(e.target.value));\n            updateNumberOfColumns();\n          }}\n          step={ZOOM_RANGE_STEP}\n          className=\"thumbnail-slider\"\n          id=\"thumbnailSize\"\n        />\n        <Button\n          img=\"icon-zoom-thumb-in\"\n          title=\"action.zoomIn\"\n          hideTooltipShortcut\n          onClick={() => {\n            if (thumbnailSize + Number(ZOOM_RANGE_STEP) < 1001) {\n              setThumbnailSize(thumbnailSize + Number(ZOOM_RANGE_STEP));\n              updateNumberOfColumns();\n            }\n          }}\n          dataElement=\"zoomThumbInButton\"\n        />\n      </div>}\n      <Measure bounds onResize={onPanelResize} key={thumbnailSize}>\n        {({ measureRef }) => (\n          <div className={`Panel ThumbnailsPanel ${panelSelector}`} id=\"virtualized-thumbnails-container\" data-element=\"thumbnailsPanel\" onDrop={onDrop} ref={measureRef}>\n            <div className=\"virtualized-thumbnails-container\">\n              {isDragging ?\n                <div className=\"thumbnailAutoScrollArea\" onDragOver={scrollUp} style={thumbnailAutoScrollAreaStyle}></div> : ''\n              }\n              <List\n                ref={listRef}\n                height={height}\n                width={width}\n                rowHeight={thumbnailHeight}\n                // Round it to a whole number because React-Virtualized list library doesn't round it for us and throws errors when rendering non whole number rows\n                // use ceiling rather than floor so that an extra row can be created in case the items can't be evenly distributed between rows\n                rowCount={Math.ceil(pageCount / numberOfColumns)}\n                rowRenderer={renderThumbnails}\n                overscanRowCount={3}\n                className={'thumbnailsList'}\n                style={{ outline: 'none' }}\n                // Ensure we show the current page in the thumbnails when we open the panel\n                scrollToIndex={Math.floor((currentPage - 1) / numberOfColumns)}\n                role='grid'\n                aria-label={t('component.thumbnailsPanel')}\n              />\n              {isDragging ?\n                <div className=\"thumbnailAutoScrollArea\" onDragOver={scrollDown} style={{ ...thumbnailAutoScrollAreaStyle, 'bottom': '70px' }}></div> : ''\n              }\n            </div>\n          </div>\n        )}\n      </Measure>\n      <DocumentControls shouldShowControls={shouldShowControls} parentElement={parentDataElement || panelSelector}/>\n    </React.Fragment>\n  );\n};\n\nexport default ThumbnailsPanel;\n","import ThumbnailsPanel from './ThumbnailsPanel';\n\nexport default ThumbnailsPanel;\n"],"sourceRoot":""}