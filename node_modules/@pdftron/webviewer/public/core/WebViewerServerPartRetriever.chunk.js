/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[13],{574:function(xa,ta,h){function ra(){return!1}function na(aa,ba,ha){if(!(ba in w))return!0;ba=w[ba];for(var x=0;x<ba.length;x++){var ca=aa;var fa=ba[x];var ma=ha;if(fa.name in ca){var la="",ia=!1;ca=ca[fa.name];switch(fa.type){case "s":la="String";ia=Object(ka.isString)(ca);break;case "a":la="Array";ia=Object(ka.isArray)(ca);break;case "n":la="Number";ia=Object(ka.isNumber)(ca)&&Object(ka.isFinite)(ca);break;case "o":la="Object",
ia=Object(ka.isObject)(ca)&&!Object(ka.isArray)(ca)}ia||ma.reject('Expected response field "'+fa.name+'" to have type '+la);fa=ia}else ma.reject('Response missing field "'+fa.name+'"'),fa=!1;if(!fa)return!1}return!0}function pa(aa){for(var ba=0,ha=["locale","excelMaxAllowedCellCount","applyPageBreaksToSheet","excelDefaultCellBorderWidth","displayChangeTracking"];ba<ha.length;ba++){var x=ha[ba],ca=x;x=x.charAt(0).toUpperCase()+x.slice(1);aa[ca]&&(Object.defineProperty(aa,x,Object.getOwnPropertyDescriptor(aa,
ca)),delete aa[ca])}return aa}h.r(ta);var ja=h(0),ka=h(1);h.n(ka);var ea=h(3);xa=h(55);var y=h(34),z=h(592),r=h(117),n=h(486),f=h(52),b=h(209),a=function(){function aa(){this.request=this.result=null;this.state=0;var ba=this;ba.promise=new Promise(function(ha,x){ba.resolve=function(){if(0===ba.state||4===ba.state)ba.state=1,ba.result=arguments[0],ha.apply(null,arguments)};ba.reject=function(){if(0===ba.state||4===ba.state)ba.state=2,x.apply(null,arguments)}})}aa.prototype.Nx=function(){return 1===
(this.state&1)};aa.prototype.Jxa=function(){return 2===(this.state&2)};aa.prototype.Al=function(){return!this.Jxa()&&!this.Nx()};aa.prototype.axa=function(){return 4===(this.state&4)};aa.prototype.yW=function(){this.state|=4};return aa}(),e=function(){function aa(){this.xx={};this.Fc=[]}aa.prototype.pop=function(){var ba=this.Fc.pop();this.xx[ba.key]=void 0;return ba};aa.prototype.push=function(ba,ha){ha={key:ba,data:ha};this.Fc.push(ha);this.xx[ba]=ha.data};aa.prototype.contains=function(ba){return!!this.xx[ba]};
aa.prototype.get=function(ba){return this.xx[ba]};aa.prototype.set=function(ba,ha){var x=this;this.xx[ba]=ha;this.Fc.forEach(function(ca,fa){ca.key===ba&&(x.Fc[fa]=ca)})};aa.prototype.remove=function(ba){var ha=this;this.xx[ba]=void 0;this.Fc.forEach(function(x,ca){x.key===ba&&ha.Fc.splice(ca,1)})};aa.prototype.length=function(){return this.Fc.length};return aa}(),w={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],health:[],tiles:[{name:"z",
type:"n"},{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],cAnnots:[{name:"annots",type:"a"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};h=function(){function aa(ba,ha,x){var ca=this;this.fX=this.f3=!1;this.qj=this.OM=this.oz=this.ag=this.NA=this.Xr=this.MA=this.qq=
null;this.Mp=new a;this.wt=new a;this.UH=!1;this.sh=this.hg=this.ig=this.fh=null;this.Rh=[];this.QI=[];this.cache={};this.timeStamp=0;this.kj=[];this.Ll=[];this.dR=null;this.S2=!1;this.Waa=this.id=null;this.aU=this.q6=ra;this.Kh=0;this.JS=!1;this.C8=1;this.Hl={};this.ew=0;this.wy=new e;ha.endsWith("/")||(ha+="/");x=x||{};this.f3=x.disableWebsockets||!1;this.fX=x.singleServerMode||!1;null!=x.customQueryParameters&&Object(f.b)("wvsQueryParameters",x.customQueryParameters);ha.endsWith("blackbox/")||
(ha+="blackbox/");this.qq=x.uploadData||null;this.oz=x.uriData||null;this.MA=x.cacheKey||null;if(this.Xr=x.officeOptions||null)this.Xr=pa(this.Xr);this.ag=x.rasterizerOptions||null;this.NA=x.cadOptions||null;this.Cg=ha;this.DQ=ba;this.gs(!0);this.zw=(new z.a(ha,null,this.$j())).Xra(!this.f3,function(fa){ca.Kza(fa)},function(){return null},function(){ca.UH=!1},function(){ca.BDa()})}aa.prototype.Yna=function(){var ba=this;return new Promise(function(ha,x){var ca=new XMLHttpRequest;ca.open("GET",ba.Cg+
"ck");ca.withCredentials=ba.$j();ca.onreadystatechange=function(){ca.readyState===XMLHttpRequest.DONE&&(200===ca.status?ha():x())};ca.send()})};aa.prototype.vFa=function(ba){this.q6=ba||ra;this.aU=ra};aa.prototype.bma=function(){this.raa();return this.zw.Lt()};aa.prototype.raa=function(){Object(ja.b)(this,void 0,void 0,function(){return Object(ja.d)(this,function(ba){switch(ba.label){case 0:return this.wt=new a,this.Mp=new a,this.UH=!1,this.id=null,this.S2=!1,[4,this.Yna().catch(function(){})];case 1:return ba.aa(),
[2]}})})};aa.prototype.BDa=function(){this.q6();this.raa();this.fh&&(this.fh.Al()?this.vj(this.fh.request):this.fh.Nx()&&this.aU(this.fh.result.url,"pdf")&&(this.fh=null,this.oaa()));this.sh&&this.sh.Al()&&this.vj(this.sh.request);this.ig&&this.ig.Al()?this.vj(this.ig.request):this.hg&&this.hg.Al()&&this.a6();var ba;for(ba=0;ba<this.kj.length;ba++)this.kj[ba]&&(this.kj[ba].Al()?this.vj(this.kj[ba].request):this.kj[ba].Nx()&&this.aU(this.kj[ba].result.url,"image")&&(this.kj[ba]=null,this.BL(Object(ka.uniqueId)(),
ba)));for(ba=0;ba<this.Ll.length;ba++)this.Ll[ba]&&this.Ll[ba].Al()&&!this.Ll[ba].axa()&&this.vj(this.Ll[ba].request);for(ba=0;ba<this.Rh.length;ba++)this.Rh[ba]&&this.Rh[ba].Al()&&this.vj(this.Rh[ba].request)};aa.prototype.uwa=function(){return this.UH?Promise.resolve():(this.UH=!0,this.timeStamp=Date.now(),this.zw.$J())};aa.prototype.NIa=function(){var ba=this,ha,x,ca,fa,ma;return new Promise(function(la,ia){if(ba.qq)ha=new FormData,ha.append("file",ba.qq.fileHandle,ba.qq.fileHandle.name),ba.Xr&&
ha.append("officeOptions",JSON.stringify(ba.Xr)),ba.ag&&ha.append("rasterizerOptions",JSON.stringify(ba.ag)),ba.NA&&ha.append("cadOptions",ba.NA.getJsonString()),ba.MA&&ha.append("cacheKey",ba.MA),x=ba.qq.loadCallback,fa="upload",ca=ba.qq.extension;else if(ba.oz)ha={uri:ba.oz.uri,ENa:ba.oz.shareId},ha=Object.keys(ha).map(function(sa){return sa+"="+(ha[sa]?encodeURIComponent(ha[sa]):"")}).join("&"),ma="application/x-www-form-urlencoded; charset=UTF-8",x=ba.oz.loadCallback,fa="url",ca=ba.oz.extension;
else{la();return}var qa=new XMLHttpRequest,oa=Object(y.k)(ba.Cg,"AuxUpload");oa=Object(b.a)(oa,{type:fa,ext:ca});qa.open("POST",oa);qa.withCredentials=ba.$j();ma&&qa.setRequestHeader("Content-Type",ma);qa.addEventListener("load",function(){if(qa.readyState===qa.DONE&&200===qa.status){var sa=JSON.parse(qa.response);ba.DQ=sa.uri;x(sa);la(sa)}});qa.addEventListener("error",function(){ia(qa.statusText+" "+JSON.stringify(qa))});ba.qq&&null!=ba.qq.onProgress&&(qa.upload.onprogress=function(sa){ba.qq.onProgress(sa)});
qa.send(ha)})};aa.prototype.qDa=function(ba){this.password=ba||null;this.Mp.Nx()||(this.Mp=new a,this.vj({t:"pages"}));return this.Mp.promise};aa.prototype.bE=function(ba){this.dR=ba||null;this.Mp.Nx()||this.vj({t:"pages"});return this.Mp.promise};aa.prototype.$A=function(ba){ba=Object.assign(ba,{uri:encodeURIComponent(this.DQ)});this.dR&&(ba.ext=this.dR);this.qj&&(ba.c=this.qj);this.password&&(ba.pswd=this.password);this.MA&&(ba.cacheKey=this.MA);this.Xr&&(ba.officeOptions=this.Xr);this.ag&&(ba.rastOptions=
this.ag);this.NA&&(ba.cadOptions=this.NA.mImpl);return ba};aa.prototype.iEa=function(){0<this.wy.length()&&10>=this.ew&&this.jEa(this.wy.pop().data)};aa.prototype.nla=function(ba){0<this.wy.length()&&this.wy.contains(ba)&&this.wy.remove(ba)};aa.prototype.vj=function(ba){ba=this.$A(ba);this.zw.send(ba)};aa.prototype.Raa=function(ba,ha){10<this.ew?this.wy.push(ba,ha):(this.ew++,ba=this.$A(ha),this.zw.send(ba))};aa.prototype.jEa=function(ba){this.ew++;ba=this.$A(ba);this.zw.send(ba)};aa.prototype.Po=
function(ba){return ba};aa.prototype.p6=function(ba){this.fX&&ba?Object(ea.j)("Server failed health check. Single server mode ignoring check."):!this.TLa&&ba&&3>=this.Kh?(this.JS=!0,this.zw.Lt()):3<this.Kh&&(this.fX=!0)};aa.prototype.Kza=function(ba){var ha=this,x=ba.data,ca=ba.err,fa=ba.t;switch(fa){case "upload":ca?this.OIa.reject(ca):this.OIa.resolve("Success");break;case "pages":ca?this.Mp.reject(ca):na(x,fa,this.Mp)&&this.Mp.resolve(x);break;case "config":if(ca)this.wt.reject(ca);else if(na(x,
fa,this.wt)){this.p6(x.unhealthy);x.id&&(this.id=x.id);if(x.auth){var ma=Object(f.a)("wvsQueryParameters");ma.auth=x.auth;Object(f.b)("wvsQueryParameters",ma)}x.serverVersion&&(this.OM=x.serverVersion,Object(ea.h)("[WebViewer Server] server version: "+this.OM));x.serverID?(this.Kh=x.serverID===this.Waa&&this.JS?this.Kh+1:0,this.Waa=x.serverID):this.Kh=0;this.JS=!1;this.wt.resolve(x)}break;case "health":ca?this.wt.reject(ca):na(x,fa,this.wt)&&this.p6(x.unhealthy);break;case "pdf":x.url=Object(b.a)(this.Cg+
"../"+encodeURI(x.url));ca?this.fh.reject(ca):na(x,fa,this.fh)&&this.fh.resolve(x);break;case "ApString2Xod":x.url=Object(b.a)(this.Cg+"../data/"+encodeURI(x.url));ca?this.Hl[x.rID].reject(ca):na(x,fa,this.Hl[x.rID])&&this.Hl[x.rID].resolve(x);break;case "docmod":x.url=Object(b.a)(this.Cg+"../"+encodeURI(x.url));ca?this.Hl[x.rID].reject(ca):na(x,fa,this.fh)&&this.Hl[x.rID].resolve(x);break;case "xod":if(ca)this.ig&&this.ig.Al()&&this.ig.reject(ca),this.hg&&this.hg.Al()&&this.hg.reject(ca);else if(x.notFound)x.noCreate||
this.ig&&this.ig.Al()&&this.ig.resolve(x),this.hg&&this.hg.Al()&&this.hg.resolve(x);else{x.url&&(x.url=Object(b.a)(this.Cg+"../"+encodeURI(x.url)));if(!this.hg||this.hg.Nx())this.hg=new a,this.hg.request={t:"xod",noCreate:!0};this.ig||(this.ig=new a,this.ig.request={t:"xod"});this.hg.resolve(x);this.ig.resolve(x)}break;case "cAnnots":ma=this.sh;if(ca)ma.reject(ca);else if(na(x,fa,ma)){ma.yW();var la=[],ia=x.annots;x=function(Ca){var Ea=ia[Ca].s,Ba=ia[Ca].e,Na=qa.Cg+"../"+encodeURI(ia[Ca].xfdf),Fa=
"true"===ia[Ca].hasAppearance?Object(b.a)(Na+".xodapp"):null,La=Object(ka.range)(Ea,Ba+1);la[Ca]={range:La,promise:new Promise(function(Oa,Ka){var Qa=new XMLHttpRequest;Qa.open("GET",Object(b.a)(Na));Qa.responseType="text";Qa.withCredentials=ha.$j();Qa.addEventListener("load",function(){Qa.readyState===Qa.DONE&&200===Qa.status&&Oa({qv:Qa.response,Co:Fa,range:La})});Qa.addEventListener("error",function(){Ka(Qa.statusText+" "+JSON.stringify(Qa))});Qa.send()})}};var qa=this;for(ca=0;ca<ia.length;ca++)x(ca);
ma.resolve(la)}break;case "annots":if(ca)this.sh.reject(ca);else if(na(x,fa,this.sh)){this.sh.yW();var oa=new XMLHttpRequest;ma=this.Cg+"../"+encodeURI(x.url);var sa=x.hasAppearance?Object(b.a)(ma+".xodapp"):null;oa.open("GET",Object(b.a)(ma));oa.responseType="text";oa.withCredentials=this.$j();oa.addEventListener("load",function(){oa.readyState===oa.DONE&&200===oa.status&&ha.sh.resolve({qv:oa.response,Co:sa})});oa.addEventListener("error",function(){ha.sh.reject(oa.statusText+" "+JSON.stringify(oa))});
oa.send()}break;case "image":this.ew--;var ua=this.kj[x.p];ca?ua.promise.reject(ca):na(x,fa,ua)&&(ua.result=x,ua.result.url=Object(b.a)(this.Cg+"../"+encodeURI(ua.result.url)),ua.resolve(ua.result));break;case "tiles":this.ew--;ua=x.rID;ma=this.Rh[ua];this.Rh[ua]=null;this.QI.push(ua);if(ca)ma.reject(ca);else if(na(x,fa,ma)){for(ca=0;ca<x.tiles.length;ca++)x.tiles[ca]=Object(b.a)(this.Cg+"../"+encodeURI(x.tiles[ca]));ma.resolve(x)}break;case "text":ua=this.Ll[x.p];if(ca)ua.reject(ca);else if(na(x,
fa,ua)){ua.yW();var wa=new XMLHttpRequest;x=Object(b.a)(this.Cg+"../"+encodeURI(x.url));wa.open("GET",x);wa.withCredentials=this.$j();wa.addEventListener("load",function(){wa.readyState===wa.DONE&&200===wa.status&&(ua.result=JSON.parse(wa.response),ua.resolve(ua.result))});wa.addEventListener("error",function(Ca){ua.reject(wa.statusText+" "+JSON.stringify(Ca))});wa.send()}break;case "progress":"loading"===x.t&&this.trigger(r.a.Events.DOCUMENT_LOADING_PROGRESS,[x.bytes,x.total])}this.iEa();!fa&&ba.echo&&
ba&&"apstring2xod"===ba.echo.t&&(ba=ba.echo.reqID)&&(2<=parseInt(this.OM,10)?this.Hl[ba].reject("Message unhandled by server"):this.Hl[ba].reject())};aa.prototype.Esa=function(){return Object(ja.b)(this,void 0,void 0,function(){return Object(ja.d)(this,function(ba){switch(ba.label){case 0:return[4,this.uwa()];case 1:return ba.aa(),[2,this.wt.promise]}})})};aa.prototype.jsa=function(ba){for(var ha=this,x=new XMLHttpRequest,ca=Object(b.a)(this.Cg+"aul",{id:this.id}),fa=new FormData,ma={},la=0;la<ba.body.length;la++){var ia=
ba.body[la];ma[ia.id]=ia.jP.w+";"+ia.jP.h;fa.append(ia.id,ia.jP.dataString)}ba={t:"apstring2xod",reqID:this.C8++,parts:ma};var qa=this.$A(ba);fa.append("msg",JSON.stringify(qa));this.Hl[qa.reqID]=new a;x.open("POST",ca);x.withCredentials=this.$j;ca=new Promise(function(oa,sa){x.onreadystatechange=function(){4===x.readyState&&(200===x.status?oa():sa("An error occurred while sending down appearance strings to the server"))}});x.send(fa);return ca.then(function(){return ha.Hl[qa.reqID].promise})};aa.prototype.fma=
function(){var ba=this.OM.split("-")[0].split("."),ha=["1","5","9"];if(3!==ba.length)throw Error("Invalid WVS version length.");if(3!==ha.length)throw Error("Invalid version length.");for(var x=0;x<ba.length;++x){if(ha.length===x||ba[x]>ha[x])return-1;if(ba[x]!==ha[x])return 1}return 0};aa.prototype.ot=function(){return 0>=this.fma()};aa.prototype.qR=function(){this.sh||(this.sh=new a,this.ot()?this.sh.request={t:"cAnnots"}:this.sh.request={t:"annots"},this.vj(this.sh.request));return this.sh.promise};
aa.prototype.BL=function(ba,ha){this.kj[ha]||(this.kj[ha]=new a,this.kj[ha].request={t:"image",p:ha},this.Raa(ba,this.kj[ha].request));return this.kj[ha].promise};aa.prototype.rDa=function(ba){this.Ll[ba]||(this.Ll[ba]=new a,this.Ll[ba].request={t:"text",p:ba},this.vj(this.Ll[ba].request));return this.Ll[ba].promise};aa.prototype.sDa=function(ba,ha,x,ca,fa){var ma=this.Rh.length;this.QI.length&&(ma=this.QI.pop());this.Rh[ma]=new a;this.Rh[ma].request={t:"tiles",p:ha,z:x,r:ca,size:fa,rID:ma};this.Raa(ba,
this.Rh[ma].request);return this.Rh[ma].promise};aa.prototype.oaa=function(){this.fh||(this.fh=new a,this.fh.request={t:"pdf"},this.S2?this.fh.resolve({url:this.DQ}):this.vj(this.fh.request));return this.fh.promise};aa.prototype.e5=function(ba){var ha=this,x=new XMLHttpRequest,ca=Object(b.a)(this.Cg+"aul",{id:this.id}),fa=new FormData,ma={};ba.annots&&(ma.annots="xfdf");ba.watermark&&(ma.watermark="png");ba.redactions&&(ma.redactions="redact");ma={t:"docmod",reqID:this.C8++,parts:ma};ba.print&&(ma.print=
!0);var la=this.$A(ma);fa.append("msg",JSON.stringify(la));return Promise.all([ba.annots,ba.watermark,ba.redactions].map(function(ia){return Promise.resolve(ia)})).then(function(ia){var qa=ia[0],oa=ia[1];ia=ia[2];qa&&fa.append("annots",qa);oa&&fa.append("watermark",oa);ia&&fa.append("redactions",ia);ha.Hl[la.reqID]=new a;x.open("POST",ca);x.withCredentials=ha.$j;qa=new Promise(function(sa,ua){x.onreadystatechange=function(){4===x.readyState&&(200===x.status?sa():ua("An error occurred while sending down annotation data to the server"))}});
x.send(fa);return qa.then(function(){return ha.Hl[la.reqID].promise})})};aa.prototype.a6=function(){this.hg||(this.hg=new a,this.hg.request={t:"xod",noCreate:!0},this.vj(this.hg.request));return this.hg.promise};aa.prototype.tDa=function(){this.ig||(this.ig=new a,this.ig.request={t:"xod"},this.vj(this.ig.request));return this.ig.promise};aa.prototype.ds=function(){return!0};aa.prototype.request=function(){};aa.prototype.D$=function(){};aa.prototype.abort=function(){for(var ba=0;ba<this.Rh.length;ba++)this.Rh[ba]&&
(this.Rh[ba].resolve(null),this.Rh[ba]=null,this.QI.push(ba));this.close()};aa.prototype.TL=function(ba){this.qj=this.qj||{};this.qj.headers=ba};aa.prototype.gs=function(ba){this.qj=this.qj||{};this.qj.internal=this.qj.internal||{};this.qj.internal.withCredentials=ba};aa.prototype.$j=function(){return this.qj&&this.qj.internal?this.qj.internal.withCredentials:null};aa.prototype.getFileData=function(){return Promise.reject()};return aa}();Object(xa.a)(h);Object(n.a)(h);Object(n.b)(h);ta["default"]=
h},592:function(xa,ta,h){var ra=h(0),na=h(3),pa=h(34),ja=h(52),ka=h(209),ea=h(96),y=function(){function r(n,f,b,a,e,w){void 0===b&&(b=null);void 0===a&&(a=null);void 0===e&&(e=null);void 0===w&&(w=null);this.Kh=0;this.nU=!1;this.bD=8;this.Caa=3E3;this.u1=this.jJa(n);this.url=f?this.u1+"/"+f:this.u1+"/ws";this.pQ=b;this.tD=a;this.XA=e;this.paa=w}r.prototype.jJa=function(n){var f=n.indexOf("://"),b="ws://";0>f?f=0:(5===f&&(b="wss://"),f+=3);var a=n.lastIndexOf("/");0>a&&(a=n.length);return b+n.slice(f,
a)};r.prototype.send=function(n){this.us.readyState===WebSocket.CLOSED||this.nU||this.us.send(JSON.stringify(n))};r.prototype.$J=function(){return Object(ra.b)(this,void 0,void 0,function(){var n,f=this;return Object(ra.d)(this,function(){n=Object(ja.a)("wvsQueryParameters");n.bcid=Object(pa.l)(8);Object(ja.b)("wvsQueryParameters",n);return[2,new Promise(function(b,a){var e=Object(ka.a)(f.url);f.us=new WebSocket(e);f.us.onopen=function(){f.nU=!1;f.Kh=0;f.tD&&f.tD();b()};f.us.onerror=function(){f.nU=
!0};f.us.onclose=function(w){w=w.code;f.XA&&f.XA();1E3!==w&&3E3!==w&&f.Qva(b,a)};f.us.onmessage=function(w){w&&w.data&&(w=JSON.parse(w.data),w.hb?f.send({hb:!0}):w.end?close():f.pQ(w))}})]})})};r.prototype.Qva=function(n,f){Object(ra.b)(this,void 0,void 0,function(){var b=this;return Object(ra.d)(this,function(){this.Kh<this.bD?setTimeout(function(){b.Kh++;Object(na.j)("Reconnecting to WebViewer Server, attempt "+b.Kh+" of "+b.bD+" ...");b.$J().then(n).catch(f)},this.Caa):f(ea.a);return[2]})})};r.prototype.Lt=
function(){var n;void 0===n&&(n=!1);this.Kh=0;n?this.us.close(3E3):this.us.close();return Promise.resolve()};return r}(),z=function(){function r(n,f,b,a,e,w,aa){void 0===a&&(a=null);void 0===e&&(e=null);void 0===w&&(w=null);void 0===aa&&(aa=null);this.Kh=this.AL=this.id=0;this.vC=!1;this.request=null;this.bD=8;this.Caa=3E3;n=this.yBa(n);this.url=f?n+"/"+f+"pf":n+"/pf";this.FM=b;this.pQ=a;this.tD=e;this.XA=w;this.paa=aa}r.prototype.yBa=function(n){var f=n.lastIndexOf("/");0>f&&(f=n.length);return n.slice(0,
f)};r.prototype.Bna=function(n){n=n.split("\n");for(n[n.length-1]&&n.pop();0<n.length&&3>n[n.length-1].length;)"]"===n.pop()&&(this.id=0);0<n.length&&3>n[0].length&&n.shift();for(var f=0;f<n.length;++f)n[f].endsWith(",")&&(n[f]=n[f].substr(0,n[f].length-1));return n};r.prototype.Baa=function(){return Object(ra.b)(this,void 0,void 0,function(){var n=this;return Object(ra.d)(this,function(f){switch(f.label){case 0:return this.Kh++<this.bD?[4,new Promise(function(b){return setTimeout(function(){n.paa();
n.$J();b()},3E3)})]:[3,2];case 1:f.aa(),f.label=2;case 2:return[2]}})})};r.prototype.ABa=function(n){Object(ra.b)(this,void 0,void 0,function(){var f,b;return Object(ra.d)(this,function(a){switch(a.label){case 0:f=null,b=0,a.label=1;case 1:if(!(b<n.length))return[3,6];f=JSON.parse(n[b]);if(!f)return[3,5];if(!f.end)return[3,2];close();return[3,5];case 2:if(!f.id||Number(f.id)===this.id)return[3,4];Object(na.j)("Reconnecting, new server detected");this.Lt();return[4,this.Baa()];case 3:return a.aa(),
[3,5];case 4:f.hb&&Number(f.id)===this.id?this.send({hb:!0}):this.vC||this.pQ(f),a.label=5;case 5:return++b,[3,1];case 6:return[2]}})})};r.prototype.Fza=function(n){Object(ra.b)(this,void 0,void 0,function(){var f,b,a;return Object(ra.d)(this,function(e){switch(e.label){case 0:if(!(3<=n.readyState))return[3,2];try{f=n.responseText.length}catch(w){return Object(na.h)("caught exception"),[2]}if(0<f)try{b=this.Bna(n.responseText),0===this.id&&0<b.length&&(a=JSON.parse(b.shift()),this.id=a.id,this.Kh=
0),this.ABa(b)}catch(w){}return this.vC?[3,2]:[4,this.X3()];case 1:e.aa(),e.label=2;case 2:return[2]}})})};r.prototype.X3=function(){return Object(ra.b)(this,void 0,void 0,function(){var n=this;return Object(ra.d)(this,function(){return[2,new Promise(function(f,b){function a(){return Object(ra.b)(n,void 0,void 0,function(){return Object(ra.d)(this,function(w){switch(w.label){case 0:b(),this.Lt(),w.label=1;case 1:return this.vC&&this.Kh<this.bD?[4,this.Baa()]:[3,3];case 2:return w.aa(),[3,1];case 3:return[2]}})})}
n.request=new XMLHttpRequest;n.request.withCredentials=n.FM;var e=Object(ka.a)(n.url,0!==n.id?{id:String(n.id),uc:String(n.AL)}:{uc:String(n.AL)});n.AL++;n.request.open("GET",e,!0);n.request.setRequestHeader("Cache-Control","no-cache");n.request.setRequestHeader("X-Requested-With","XMLHttpRequest");n.request.onreadystatechange=function(){n.Fza(n.request)};n.request.addEventListener("error",a);n.request.addEventListener("timeout",a);n.request.addEventListener("load",function(){n.tD&&n.tD();f()});n.request.send()})]})})};
r.prototype.$J=function(){var n=Object(ja.a)("wvsQueryParameters");n.bcid=Object(pa.l)(8);Object(ja.b)("wvsQueryParameters",n);this.AL=this.id=0;this.vC=!1;return this.X3()};r.prototype.send=function(n){var f=this,b=new XMLHttpRequest;b.withCredentials=this.FM;var a=Object(ka.a)(this.url,{id:String(this.id)}),e=new FormData;e.append("data",JSON.stringify(n));b.addEventListener("error",function(){f.Lt()});b.open("POST",a);b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.send(e)};r.prototype.Lt=
function(){this.id=0;this.vC=!0;this.XA&&this.XA();this.request.abort();return Promise.resolve()};return r}();xa=function(){function r(n,f,b){this.h2=n;this.target=f;this.FM=b}r.prototype.Xra=function(n,f,b,a,e){void 0===n&&(n=!0);void 0===f&&(f=null);void 0===b&&(b=null);void 0===a&&(a=null);void 0===e&&(e=null);return n?new y(this.h2,this.target,f,b,a,e):new z(this.h2,this.target,this.FM,f,b,a,e)};return r}();ta.a=xa}}]);}).call(this || window)
